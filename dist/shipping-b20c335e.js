"use strict";(self.webpackJsonpCheckout=self.webpackJsonpCheckout||[]).push([[553],{44411:(e,t,n)=>{n.r(t),n.d(t,{default:()=>hi,mapToShippingProps:()=>pi});var i=n(31635),a=n(93564),s=n(30455),r=n(90197),o=n(77050),l=n(49655),d=n(17986),c=n(40891),u=n(6663);function m(e){var t=e.customFields,n=(0,i.__rest)(e,["customFields"]),a=e.shouldSaveAddress;return(0,i.__assign)((0,i.__assign)({},n),{shouldSaveAddress:a,customFields:(0,u.A)(t)})}function p(e,t){return!(!e||!t)&&((0,a.isEqual)(h(e),h(t))&&function(e,t){if(e.stateOrProvince&&e.stateOrProvince===t.stateOrProvince)return!0;if(e.stateOrProvinceCode&&e.stateOrProvinceCode===t.stateOrProvinceCode)return!0;return e.stateOrProvince===t.stateOrProvince&&e.stateOrProvinceCode===t.stateOrProvinceCode}(e,t))}function h(e){return(0,a.omit)((0,i.__assign)((0,i.__assign)({},e),{customFields:(e.customFields||[]).filter((function(e){return!!e.fieldValue}))}),["id","shouldSaveAddress","stateOrProvince","stateOrProvinceCode","type","email","country"])}var g=n(45293),f=n(87980),v=n(79001),S=n(84559),A=n(12402),E=n(98610),_=n(84087),C=n(85021),y=n(4853);const b=function(e){function t(n){var i=e.call(this,{name:"UNASSIGN_ITEM_FAILED",message:(0,_.A)().translate("shipping.unassign_item_error"),data:n})||this;return(0,C.h)(i,t.prototype),i}return(0,i.__extends)(t,e),t}(y.A);var I=n(79877);function N(e,t){return void 0===t&&(t=!1),t?(0,I.A)(e.lineItems.physicalItems.filter((function(e){return!e.addedByPromotion&&!e.parentId}))):(0,I.A)(e.lineItems.physicalItems.filter((function(e){return!e.addedByPromotion})))}var w=n(57398),k=n(60045);function M(e,t){var n,i=[E.A.AmazonPay,E.A.BraintreeAcceleratedCheckout,E.A.PayPalCommerceAcceleratedCheckout],a=(0,A.A)(null===(n=t.checkoutSettings)||void 0===n?void 0:n.providerWithCustomCheckout),s=function(e){return(e&&e.payments?e.payments:[]).find((function(e){return!(0,w.A)(e)&&!(0,k.A)(e)&&!!e.providerId}))}(e);return s&&i.indexOf(s.providerId)>-1?s.providerId:a&&i.indexOf(a)>-1?a:void 0}function O(e){var t,n=e.lineItems,a=n.digitalItems,s=void 0===a?[]:a,r=n.physicalItems;return(null===(t=(0,i.__spreadArray)((0,i.__spreadArray)([],s,!0),r,!0).filter((function(e){return e.addedByPromotion})))||void 0===t?void 0:t.length)>0}var L=n(68512),F=n(33318),P=n(71055),x=n(46522),U=n(46487),T=n(4899),R=n(13461),z=n(92909),B=n(58330),D=n(84278),V=n(70946),H=n(60833),W=n(82418),K=n(37958),G={address1:"addressLine1",address2:"addressLine2",postalCode:"postCode",stateOrProvince:"province",stateOrProvinceCode:"provinceCode"};function q(e){return"".concat(G[e]||e)}function J(e){return"".concat(q(e),"Input")}const Q=function(){function e(e){var t=e.address_components,n=e.name;this._name=n,this._address=t}return e.prototype.getState=function(){return this._get("administrative_area_level_1","short_name")},e.prototype.getStreet=function(){return this._name},e.prototype.getStreet2=function(){return"NZ"===this.getCountry()?this._get("sublocality","short_name"):this._get("subpremise","short_name")},e.prototype.getCity=function(){return this._get("postal_town","long_name")||this._get("locality","long_name")||this._get("neighborhood","short_name")},e.prototype.getCountry=function(){return this._get("country","short_name")},e.prototype.getPostCode=function(){return this._get("postal_code","short_name")},e.prototype._get=function(e,t){var n=this._address&&this._address.find((function(t){return-1!==t.types.indexOf(e)}));return n?n[t]:""},e}();const j=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,i.__extends)(t,e),t.prototype.getCity=function(){return this._get("sublocality_level_1","long_name")||this._get("locality","long_name")},t}(Q);const Z=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,i.__extends)(t,e),t.prototype.getState=function(){return""},t.prototype.getStreet2=function(){return this._get("locality","long_name")},t.prototype.getPostCode=function(){return""},t}(Q);const Y=function(){function e(){}return e.create=function(e){var t,n=null===(t=e.address_components)||void 0===t?void 0:t.find((function(e){return e.types.indexOf("country")>=0}));switch((null==n?void 0:n.short_name)||""){case"GB":return new Z(e);case"CA":return new j(e);default:return new Q(e)}},e}();var X=n(9188),$=n.n(X),ee=n(28407),te=n(22375),ne=n(30673);const ie=function(e){var t=e.children;return s.createElement("div",{className:"popover"},t)};function ae(e,t){var n=["popoverList-item"];return e===t&&n.push("is-active"),n.join(" ")}const se=(0,s.memo)((function(e){var t=e.highlightedIndex,n=void 0===t?-1:t,a=e.testId,r=e.getItemProps,o=void 0===r?function(e){return e}:r,l=e.menuProps,d=void 0===l?{}:l,c=e.items;return c.length?s.createElement("ul",(0,i.__assign)({className:"popoverList","data-test":a},d),c.map((function(e,t){return s.createElement("li",(0,i.__assign)({className:ae(n,t),"data-test":a&&"".concat(a,"-item")},o({key:e.id,index:t,item:e}),{key:t}),e.content)}))):null}));const re=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.stateReducer=function(e,n){var a=t.props.onChange;switch(n.type){case ne.Ay.stateChangeTypes.blurInput:case ne.Ay.stateChangeTypes.blurButton:case ne.Ay.stateChangeTypes.mouseUp:case ne.Ay.stateChangeTypes.touchEnd:return(0,i.__assign)((0,i.__assign)({},n),{inputValue:e.inputValue});case ne.Ay.stateChangeTypes.changeInput:return n.inputValue!==e.inputValue&&a&&a(n.inputValue||"",e.isOpen),n;case ne.Ay.stateChangeTypes.keyDownEnter:default:return n}},t.handleStateChange=function(e){var n=e.isOpen,i=e.inputValue,s=t.props.onToggleOpen,r=void 0===s?a.noop:s;void 0!==n&&r({isOpen:n,inputValue:i||""})},t}return(0,i.__extends)(t,e),t.prototype.render=function(){var e=this,t=this.props,n=t.inputProps,r=t.initialValue,o=t.initialHighlightedIndex,l=t.defaultHighlightedIndex,d=t.items,c=t.children,u=t.onSelect,m=t.listTestId;return s.createElement(ne.Ay,{defaultHighlightedIndex:l,initialHighlightedIndex:o,initialInputValue:r,itemToString:this.itemToString,labelId:n&&n["aria-labelledby"]?n["aria-labelledby"]:null,onChange:u,onStateChange:this.handleStateChange,stateReducer:this.stateReducer},(function(t){var r=t.isOpen,o=t.getInputProps,l=t.getMenuProps,u=t.getItemProps,p=t.highlightedIndex,h=(0,i.__assign)((0,i.__assign)({},o()),n);return delete h.labelText,s.createElement("div",null,s.createElement("input",(0,i.__assign)({},h)),n&&(0,a.includes)(n.className,"floating")&&s.createElement(ee.A,{htmlFor:n.id,id:n["aria-labelledby"],isFloatingLabelEnabled:!0},n.labelText),r&&!!d.length&&s.createElement(ie,null,s.createElement(se,{getItemProps:u,highlightedIndex:(0,a.isNumber)(p)?p:-1,items:d.map((function(t){return e.toPopoverItem(t)})),menuProps:l(),testId:m}),c))}))},t.prototype.toPopoverItem=function(e){return(0,i.__assign)((0,i.__assign)({},e),{content:this.highlightItem(e)})},t.prototype.highlightItem=function(e){if(!e.highlightedSlices||!e.highlightedSlices.length)return e.label;var t=0,n=0;return e.highlightedSlices.reduce((function(i,a,r){var o=e.label,l=a.offset,d=a.length,c=l-t;return c&&(i.push(s.createElement(s.Fragment,{key:n},o.substr(t,c))),n+=1),t=l+d,i.push(s.createElement("strong",{key:n},o.substr(l,d))),n+=1,r===(e.highlightedSlices||[]).length-1&&(i.push(s.createElement(s.Fragment,{key:n},o.substr(t))),n+=1),i}),[])},t.prototype.itemToString=function(e){return e&&e.value||""},t}(s.PureComponent);var oe=n(45647);const le=function(){function e(){this._scriptLoader=(0,oe.getScriptLoader)()}return e.prototype.loadMapsSdk=function(e){var t=this;return this._googleAutoComplete||(this._googleAutoComplete=new Promise((function(n,i){var a="initAutoComplete",s=["language=en","key=".concat(e),"libraries=places","callback=".concat(a)].join("&");window[a]=function(){(function(e){var t=e;return Boolean(t.google&&t.google.maps&&t.google.maps.places)})(window)&&n(window.google.maps),i()},t._scriptLoader.loadScript("//maps.googleapis.com/maps/api/js?".concat(s)).catch((function(e){throw t._googleAutoComplete=void 0,e}))}))),this._googleAutoComplete},e}();var de;const ce=function(){function e(e,t){void 0===t&&(de||(de=new le),t=de),this._apiKey=e,this._scriptLoader=t}return e.prototype.getAutocompleteService=function(){return this._autocompletePromise||(this._autocompletePromise=this._scriptLoader.loadMapsSdk(this._apiKey).then((function(e){if(!e.places.AutocompleteService)throw new Error("`AutocompleteService` is undefined");return new e.places.AutocompleteService}))),this._autocompletePromise},e.prototype.getPlacesServices=function(){var e=document.createElement("div");return this._placesPromise||(this._placesPromise=this._scriptLoader.loadMapsSdk(this._apiKey).then((function(t){if(!t.places.PlacesService)throw new Error("`PlacesService` is undefined");return new t.places.PlacesService(e)}))),this._placesPromise},e}();const ue=function(e){function t(t){var n=e.call(this,t)||this;return n.onSelect=function(e){var t=n.props,i=t.fields,s=t.onSelect,r=void 0===s?a.noop:s,o=t.nextElement;n.googleAutocompleteService.getPlacesServices().then((function(t){t.getDetails({placeId:e.id,fields:i||["address_components","name"]},(function(t){o&&o.focus(),r(t,e)}))}))},n.onChange=function(e){var t=n.props,i=t.isAutocompleteEnabled,s=t.onChange;if((void 0===s?a.noop:s)(e,!1),!i)return n.resetAutocomplete();n.setAutocomplete(e),n.setItems(e)},n.googleAutocompleteService=new ce(t.apiKey),n.state={items:[],autoComplete:"off"},n}return(0,i.__extends)(t,e),t.prototype.render=function(){var e=this.props,t=e.initialValue,n=e.onToggleOpen,r=void 0===n?a.noop:n,o=e.inputProps,l=void 0===o?{}:o,d=this.state,c=d.autoComplete,u=d.items;return s.createElement(re,{defaultHighlightedIndex:-1,initialHighlightedIndex:-1,initialValue:t,inputProps:(0,i.__assign)((0,i.__assign)({},l),{autoComplete:c}),items:u,listTestId:"address-autocomplete-suggestions",onChange:this.onChange,onSelect:this.onSelect,onToggleOpen:r},s.createElement("div",{className:"co-googleAutocomplete-footer"}))},t.prototype.setItems=function(e){var t=this;if(e){var n=this.props,i=n.componentRestrictions,a=n.types;this.googleAutocompleteService.getAutocompleteService().then((function(n){n.getPlacePredictions({input:e,types:a||["geocode"],componentRestrictions:i},(function(e){return t.setState({items:t.toAutocompleteItems(e)})}))}))}else this.setState({items:[]})},t.prototype.resetAutocomplete=function(){this.setState({items:[],autoComplete:"off"})},t.prototype.setAutocomplete=function(e){this.setState((0,i.__assign)((0,i.__assign)({},this.state),{autoComplete:e&&e.length?"nope":"off"}))},t.prototype.toAutocompleteItems=function(e){return(e||[]).map((function(e){return{label:e.description,value:e.structured_formatting.main_text,highlightedSlices:e.matched_substrings,id:e.place_id}}))},t}(s.PureComponent);const me=(0,s.memo)((function(e){var t=e.field,n=t.default,i=t.name,a=t.maxLength,r=e.countryCode,o=e.supportedCountries,d=e.parentFieldName,c=e.nextElement,u=e.apiKey,m=e.onSelect,p=e.onChange,h=e.onToggleOpen,g=e.isFloatingLabelEnabled,f=d?"".concat(d,".").concat(i):i,v=(0,s.useMemo)((function(){return s.createElement(l.A,{id:"address.address_line_1_label"})}),[]),S=function(e){return"".concat(q(e),"Label")}(i),A=(0,s.useMemo)((function(){return{className:$()("form-input optimizedCheckout-form-input",{"floating-input":g}),id:J(i),"aria-labelledby":S,placeholder:g?" ":n,labelText:g?v:null,maxLength:a||void 0}}),[i,S,n,v,a]),E=(0,s.useCallback)((function(e){var t=e.field;return s.createElement(ue,{apiKey:u,componentRestrictions:r?{country:r}:void 0,initialValue:t.value,inputProps:A,isAutocompleteEnabled:!!r&&o.indexOf(r)>-1,nextElement:c,onChange:p,onSelect:m,onToggleOpen:h})}),[u,r,A,c,p,m,h,o]),_=g?null:s.createElement(ee.A,{htmlFor:A.id,id:S,isFloatingLabelEnabled:g},v);return s.createElement("div",{className:$()("dynamic-form-field dynamic-form-field--addressLineAutocomplete",{"floating-form-field":g}),"data-test":"google-autocomplete-form-field"},s.createElement(te.A,{input:E,isFloatingLabelEnabled:g,label:_,name:f}))}));var pe={address1:"address.address_line_1_label",address2:"address.address_line_2_label",city:"address.city_label",company:"address.company_name_label",countryCode:"address.country_label",firstName:"address.first_name_label",lastName:"address.last_name_label",phone:"address.phone_number_label",postalCode:"address.postal_code_label",stateOrProvince:"address.state_label",stateOrProvinceCode:"address.state_label"},he={address1:"address-line1",address2:"address-line2",city:"address-level2",company:"organization",countryCode:"country",firstName:"given-name",lastName:"family-name",phone:"tel",postalCode:"postal-code",stateOrProvince:"address-level1",stateOrProvinceCode:"address-level1"},ge={countryCode:"address.select_country_action",stateOrProvince:"address.select_state_action",stateOrProvinceCode:"address.select_state_action",firstName:"Wikus",lastName:"van de Merwe"},fe="address1",ve=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.containerRef=(0,s.createRef)(),t.handleDynamicFormFieldChange=(0,D.memoize)((function(e){return function(n){t.syncNonFormikValue(e,n)}})),t.handleAutocompleteChange=function(e,n){n||t.syncNonFormikValue(fe,e)},t.handleAutocompleteSelect=function(e,n){var s=n.value,r=t.props,o=r.countries,l=r.setFieldValue,d=void 0===l?a.noop:l,c=r.onChange,u=void 0===c?a.noop:c,m=function(e,t){if(void 0===t&&(t=[]),!e||!e.address_components)return{};var n=Y.create(e),a=n.getState(),s=n.getCountry(),r=t&&t.find((function(e){return s===e.code})),o=n.getStreet2();return(0,i.__assign)({address2:o,city:n.getCity(),countryCode:s,postalCode:n.getPostCode()},a?function(e,t){void 0===t&&(t=[]);var n=t.find((function(t){var n=t.code,i=t.name;return n===e||i===e}));return n?{stateOrProvince:n.name,stateOrProvinceCode:n.code}:{stateOrProvince:t.length?"":e,stateOrProvinceCode:""}}(a,r&&r.subdivisions):{})}(e,o);(0,a.forIn)(m,(function(e,t){d(t,e),u(t,e)})),s&&t.syncNonFormikValue(fe,s)},t.syncNonFormikValue=function(e,n){var i=t.props,s=i.formFields,r=i.setFieldValue,o=void 0===r?a.noop:r,l=i.onChange,d=void 0===l?a.noop:l,c=s.filter((function(e){return e.custom&&e.fieldType===V.A.date})).map((function(e){return e.name}));(e===fe||c.indexOf(e)>-1)&&o(e,n),d(e,n)},t}return(0,i.__extends)(t,e),t.prototype.componentDidMount=function(){var e=this.containerRef.current;e&&(this.nextElement=e.querySelector('[autocomplete="address-line2"]'))},t.prototype.render=function(){var e=this,t=this.props,n=t.formFields,i=t.fieldName,a=t.countriesWithAutocomplete,r=t.countryCode,o=t.googleMapsApiKey,d=t.onAutocompleteToggle,c=t.shouldShowSaveAddress,u=t.isFloatingLabelEnabled;return s.createElement(s.Fragment,null,s.createElement(H.A,null,s.createElement("div",{className:"checkout-address",ref:this.containerRef},n.map((function(t){var n=t.name,c=ge[n];return"address1"===n&&o&&a?s.createElement(me,{apiKey:o,countryCode:r,field:t,isFloatingLabelEnabled:u,key:t.id,nextElement:e.nextElement||void 0,onChange:e.handleAutocompleteChange,onSelect:e.handleAutocompleteSelect,onToggleOpen:d,parentFieldName:i,supportedCountries:a}):s.createElement(W.A,{autocomplete:he[t.name],extraClass:"dynamic-form-field--".concat(q(n)),field:t,inputId:J(n),isFloatingLabelEnabled:u,key:"".concat(t.id,"-").concat(t.name),label:t.custom?t.label:s.createElement(l.A,{id:pe[t.name]}),onChange:e.handleDynamicFormFieldChange(n),parentFieldName:t.custom?i?"".concat(i,".customFields"):"customFields":i,placeholder:e.getPlaceholderValue(t,c)})})))),c&&s.createElement(K.A,{labelContent:s.createElement(l.A,{id:"address.save_in_addressbook"}),name:i?"".concat(i,".shouldSaveAddress"):"shouldSaveAddress"}))},t.prototype.getPlaceholderValue=function(e,t){var n=this.props.language;return e.default&&"dropdown"!==e.fieldType?e.default:t&&n.translate(t)},t}(s.Component);const Se=(0,L.A)(ve);var Ae=n(33515),Ee=(0,L.A)((0,P.withFormik)({handleSubmit:function(e,t){(0,t.props.onSaveAddress)(e)},mapPropsToValues:function(e){var t=e.defaultCountryCode;return{firstName:"",lastName:"",address1:"",address2:"",customFields:{},country:"",countryCode:void 0===t?"":t,stateOrProvince:"",stateOrProvinceCode:"",postalCode:"",phone:"",city:"",company:"",shouldSaveAddress:!1}},validationSchema:function(e){var t=e.language,n=e.getFields;return(0,x.RZ)((function(e){return(0,Ae.A)({language:t,formFields:n(e&&e.countryCode)})}))}})((function(e){var t=e.googleMapsApiKey,n=e.getFields,i=e.countriesWithAutocomplete,a=e.countries,r=e.values,o=e.setFieldValue,d=e.isLoading,c=e.onRequestClose,u=e.isFloatingLabelEnabled;return s.createElement(T.A,{autoComplete:"on"},s.createElement(R.A,{isLoading:d},s.createElement(Se,{countries:a,countriesWithAutocomplete:i,countryCode:r.countryCode,formFields:n(r.countryCode),googleMapsApiKey:t,isFloatingLabelEnabled:u,setFieldValue:o,shouldShowSaveAddress:!1}),s.createElement("div",{className:"form-actions"},s.createElement(U.Ay,{onClick:c,variant:U.Ak.Secondary},s.createElement(l.A,{id:"common.cancel_action"})),s.createElement(U.Ay,{disabled:d,id:"checkout-save-address",type:"submit",variant:U.Ak.Primary},s.createElement(l.A,{id:"address.save_address_action"})))))})));const _e=function(e){var t=e.isOpen,n=e.onAfterOpen,a=e.onRequestClose,r=(0,i.__rest)(e,["isOpen","onAfterOpen","onRequestClose"]);return s.createElement(z.A,{additionalModalClassName:"modal--medium",header:s.createElement(B.A,null,s.createElement(l.A,{id:"address.add_address_heading"})),isOpen:t,onAfterOpen:n,onRequestClose:a,shouldShowCloseButton:!0},s.createElement(Ee,(0,i.__assign)({},r,{onRequestClose:a})))};var Ce=n(72889);function ye(e){return function(t){var n=function(e){var n=e.resetForm,a=e.isInitialValueLoaded,r=(0,s.useRef)(a);return(0,s.useEffect)((function(){!1===r.current&&!0===a&&n(),r.current=a}),[a]),s.createElement(t,(0,i.__assign)({},e))};return n.displayName="WithFormikExtended(".concat(t.displayName||t.name,")"),(0,P.withFormik)(e)(n)}}const be=function(e){function t(n){var i=e.call(this,{name:"ASSIGN_ITEM_INVALID_ADDRESS",message:(0,_.A)().translate("shipping.assign_item_invalid_address_error"),title:(0,_.A)().translate("shipping.assign_item_invalid_address_error_heading"),data:n})||this;return(0,C.h)(i,t.prototype),i}return(0,i.__extends)(t,e),t}(y.A);const Ie=function(e){function t(n){var i=e.call(this,{name:"ASSIGN_ITEM_FAILED",message:(0,_.A)().translate("shipping.assign_item_error"),data:n})||this;return(0,C.h)(i,t.prototype),i}return(0,i.__extends)(t,e),t}(y.A);function Ne(e,t){return(0,a.find)(e,(function(e){return(0,a.includes)(e.lineItemIds,t)}))}function we(e,t){return(0,a.reduce)(e&&e.lineItems.physicalItems||[],(function(e,n,s){return!n.addedByPromotion&&(0,a.isNil)(n.parentId)?e.concat.apply(e,function(e,t,n){for(var a=[],s=Ne(t,e.id),r=0;r<e.quantity;r++)a=a.concat((0,i.__assign)((0,i.__assign)({},e),{key:"".concat(e.variantId,"-").concat(e.productId,"-").concat(n,"-").concat(r),consignment:s,quantity:1}));return a}(n,t,s)):e}),[])}var ke=n(4209),Me=n(9597),Oe=n(72769),Le=n(19809),Fe=n(69894),Pe=n(17645);const xe=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={shouldShow:!1},t.handleClick=function(e){t.state.shouldShow?t.handleClose(e.nativeEvent):t.handleOpen(e.nativeEvent)},t.handleOpen=function(){t.state.shouldShow||t.setState({shouldShow:!0},(function(){var e;null===(e=t.getRootElement())||void 0===e||e.addEventListener("click",t.handleClose)}))},t.handleClose=function(){t.state.shouldShow&&t.setState({shouldShow:!1},(function(){var e;null===(e=t.getRootElement())||void 0===e||e.removeEventListener("click",t.handleClose)}))},t}return(0,i.__extends)(t,e),t.prototype.componentWillUnmount=function(){document.removeEventListener("click",this.handleClose)},t.prototype.render=function(){var e=this,t=this.props,n=t.children,a=t.placement,r=t.dropdown,o=this.state.shouldShow;return s.createElement(Pe.mS,null,s.createElement(Pe.Or,null,(function(t){var i=t.ref;return s.createElement("div",{className:"dropdownTrigger",onClick:e.handleClick,ref:i},n)})),s.createElement(Pe.ND,{modifiers:{hide:{enabled:!1},flip:{enabled:!1},preventOverflow:{enabled:!1}},placement:a},(function(e){var t=e.ref,n=e.style;return o?s.createElement("div",{className:"dropdownMenu",ref:t,style:(0,i.__assign)((0,i.__assign)({},n),{width:"100%",zIndex:1})},r):null})))},t.prototype.getRootElement=function(){return document.getElementById("checkout-app")||document.getElementById("micro-app-ng-checkout")},t.defaultProps={placement:"bottom-start"},t}(s.Component);var Ue=n(39981),Te=n(62562),Re=n(8444),ze=function(e){var t=e.firstName,n=e.lastName,i=e.address1,a=e.address2,s=e.city,r=e.countryCode,o=[i,a,s,e.stateOrProvince,r,e.postalCode].filter(Boolean).join(", ");return t&&n&&o?"".concat(t," ").concat(n,", ").concat(o):""};const Be=function(e){var t=e.address,n=e.type,i=(0,Ue.Q)().checkoutState.data,a=i.getConfig,r=i.getBillingAddressFields,o=i.getShippingAddressFields,l=a(),d=(0,f.A)(null==l?void 0:l.checkoutSettings,"CHECKOUT-7560.address_fields_max_length_validation"),c=n===Te.A.Billing?r(t.countryCode):n===Te.A.Shipping?o(t.countryCode):void 0;return(0,Re.A)(t,d,c)?s.createElement("div",{className:"vcard checkout-address--static","data-test":"static-address"},s.createElement("p",{className:"address-entry"},ze(t))):null};var De=n(11152);const Ve=(0,L.A)((function(e){var t=e.selectedAddress,n=e.language,i=e.type,a=e.showSingleLineAddress,r=e.placeholderText,o=(0,s.useState)(!1),d=o[0],c=o[1];return s.createElement("a",{"aria-controls":"addressDropdown","aria-describedby":n.translate("address.enter_or_select_address_action"),"aria-expanded":d,className:"button dropdown-button dropdown-toggle--select","data-test":"address-select-button",href:"#",id:"addressToggle",onBlur:function(){return c(!1)},onClick:(0,Oe.A)((function(){return c(!d)}))},s.createElement((function(){return t?a?s.createElement(Be,{address:t,type:i}):s.createElement(De.A,{address:t,type:i}):null!=r?r:s.createElement(l.A,{id:"address.enter_address_action"})}),null))}));var He=function(e){var t=e.addresses,n=e.onSelectAddress,i=e.onUseNewAddress,a=e.selectedAddress,r=e.type;return s.createElement("ul",{className:"dropdown-menu instrumentSelect-dropdownMenu",id:"addressDropdown"},s.createElement("li",{className:"dropdown-menu-item dropdown-menu-item--select"},s.createElement("a",{"data-test":"add-new-address",href:"#",onClick:(0,Oe.A)((function(){return i(a)}))},s.createElement(l.A,{id:"address.enter_address_action"}))),t.map((function(e){return s.createElement("li",{className:"dropdown-menu-item dropdown-menu-item--select","data-test":"address-select-option",key:e.id},s.createElement("a",{"data-test":"address-select-option-action",href:"#",onClick:(0,Oe.A)((function(){return n(e)}))},s.createElement(De.A,{address:e,type:r})))})))};const We=(0,s.memo)((function(e){var t=e.addresses,n=e.selectedAddress,i=e.type,a=e.showSingleLineAddress,r=e.onSelectAddress,o=e.onUseNewAddress,l=e.placeholderText,d=(0,Le.A)().shouldShowPayPalFastlaneLabel;return s.createElement("div",{className:"form-field"},s.createElement("div",{className:"dropdown--select"},s.createElement(xe,{dropdown:s.createElement(He,{addresses:t,onSelectAddress:function(e){p(n,e)||r(e)},onUseNewAddress:function(){o(n)},selectedAddress:n,type:i})},s.createElement(Ve,{addresses:t,placeholderText:l,selectedAddress:n,showSingleLineAddress:a,type:i}))),d&&s.createElement(Fe.A,null))}));const Ke=(0,s.memo)((function(e){var t=e.item,n=t.id,i=t.key,a=t.imageUrl,r=t.quantity,o=t.name,l=t.options,d=t.consignment,c=e.addresses,u=e.onSelectAddress,m=e.onUseNewAddress,p=(0,s.useCallback)((function(){m(n,i)}),[n,m,i]),h=(0,s.useCallback)((function(e){u(e,n,i)}),[n,i,u]);return s.createElement("div",{className:"consignment"},s.createElement("figure",{className:"consignment-product-figure"},a&&s.createElement("img",{alt:o,src:a})),s.createElement("div",{className:"consignment-product-body"},s.createElement("h4",{className:"optimizedCheckout-contentPrimary"},"".concat(r," x ").concat(o)),(l||[]).map((function(e){var t=e.name,n=e.value,i=e.nameId;return s.createElement("ul",{className:"product-options optimizedCheckout-contentSecondary","data-test":"consigment-item-product-options",key:i},s.createElement("li",{className:"product-option"},"".concat(t," ").concat(n)))})),s.createElement(We,{addresses:c,onSelectAddress:h,onUseNewAddress:p,selectedAddress:d&&d.shippingAddress,type:Te.A.Shipping})))}));var Ge=n(41109),qe=n(54454),Je=n(43586);const Qe=function(){var e=(0,s.useCallback)((function(e){return s.createElement(ee.A,{hidden:!0,htmlFor:e},s.createElement(l.A,{id:"shipping.order_comment_label"}))}),[]),t=(0,s.useCallback)((function(e){var t=e.field;return s.createElement(qe.A,(0,i.__assign)({},t,{autoComplete:"off",maxLength:2e3}))}),[]),n=(0,s.useMemo)((function(){return s.createElement(Je.A,null,s.createElement(l.A,{id:"shipping.order_comment_label"}))}),[]);return s.createElement(H.A,{legend:n,testId:"checkout-shipping-comments"},s.createElement(te.A,{id:"orderComment",input:t,label:e,name:"orderComment"}))};var je=n(11889),Ze=n(17080),Ye=n(2398);function Xe(e){if(e)return e.find((function(e){return e.isRecommended}))}var $e=n(53056),et=n(75363);const tt=(0,s.createContext)({onToggle:a.noop});const nt=(0,s.memo)((function(e){var t,n,i=e.bodyClassName,a=void 0===i?"accordion-item-body":i,r=e.children,o=e.className,l=void 0===o?"accordion-item":o,d=e.classNameSelected,c=void 0===d?"accordion-item--selected":d,u=e.headerClassName,m=void 0===u?"accordion-item-header":u,p=e.headerClassNameSelected,h=void 0===p?"accordion-item-header--selected":p,g=e.headerContent,f=e.itemId,v=(0,s.useContext)(tt),S=v.onToggle,A=v.selectedItemId===f,E=(0,s.useCallback)((function(e,t){e.addEventListener("transitionend",(function(n){n.target===e&&t()}))}),[]);return s.createElement("li",{className:$()(l,(t={},t[c]=A,t))},s.createElement("div",{className:$()(m,(n={},n[h]=A,n))},g({isSelected:A,onToggle:S})),r?s.createElement(et.CSSTransition,{addEndListener:E,classNames:a,in:A,mountOnEnter:!0,timeout:{},unmountOnExit:!0},s.createElement("div",{className:a},r)):null)}));var it=n(29853);const at=function(e){var t=e.children,n=e.className,i=void 0===n?"accordion":n,r=e.defaultSelectedItemId,o=e.isDisabled,l=e.onSelect,d=void 0===l?a.noop:l,c=(0,s.useState)(r),u=c[0],m=c[1],p=function(e){o||(m(e),d(e))},h=(0,D.memoizeOne)((function(e){return{onToggle:p,selectedItemId:e}}));return s.createElement(tt.Provider,{value:h(u)},s.createElement("ul",{className:i},t))};var st=n(72928),rt=n.n(st);function ot(e){var t=(0,s.memo)((function(t){return s.createElement(e,(0,i.__assign)({},t))}),(function(e,t){var n=e.formik,a=(0,i.__rest)(e,["formik"]),s=t.formik,r=(0,i.__rest)(t,["formik"]);return rt()(n,s)&&rt()(a,r)})),n=(0,P.connect)(t);return n.displayName="ConnectFormik(".concat(e.displayName||e.name,")"),n}var lt=(0,s.createContext)(void 0);const dt=ot((0,s.memo)((function(e){var t=e.formik.setFieldValue,n=e.name,r=e.onSelect,o=void 0===r?a.noop:r,l=(0,i.__rest)(e,["formik","name","onSelect"]),d=(0,s.useCallback)((function(e){t(n,e),o(e)}),[n,o,t]),c=(0,s.useMemo)((function(){return{name:n}}),[n]);return s.createElement(lt.Provider,{value:c},s.createElement(at,(0,i.__assign)({},l,{className:"form-checklist optimizedCheckout-form-checklist",onSelect:d})))})));var ct=n(34953);const ut=function(e){var t=e.id,n=e.isSelected,a=e.children,r=(0,i.__rest)(e,["id","isSelected","children"]);return s.createElement(s.Fragment,null,s.createElement(ct.A,(0,i.__assign)({},r,{checked:n,className:"form-checklist-checkbox optimizedCheckout-form-checklist-checkbox",id:t,type:"radio"})),s.createElement(ee.A,{htmlFor:t},a))};const mt=(0,s.memo)((function(e){var t=e.isDisabled,n=e.value,r=e.content,o=e.htmlId,l=void 0===o?(0,a.kebabCase)(n):o,d=e.label,c=(0,i.__rest)(e,["isDisabled","value","content","htmlId","label"]),u=((0,s.useContext)(lt)||{}).name,m=void 0===u?"":u,p=(0,s.useCallback)((0,D.memoizeOne)((function(e){return function(a){var r=a.field;return s.createElement(ut,(0,i.__assign)({},r,{disabled:t,id:l,isSelected:r.value===n,value:n}),d instanceof Function?d(e):d)}})),[l,t,d,n]),h=(0,s.useCallback)((0,D.memoizeOne)((function(e){return function(t){n===t&&e(n)}})),[]),g=(0,s.useCallback)((function(e){var t=e.isSelected,n=e.onToggle;return s.createElement(it.A,{className:"form-checklist-option",name:m,onChange:h(n),render:p(t)})}),[h,m,p]);return s.createElement(nt,(0,i.__assign)({},c,{bodyClassName:"form-checklist-body",className:"form-checklist-item optimizedCheckout-form-checklist-item",classNameSelected:"form-checklist-item--selected optimizedCheckout-form-checklist-item--selected",headerClassName:"form-checklist-header",headerClassNameSelected:"form-checklist-header--selected",headerContent:g,itemId:n}),r)}));var pt=n(96399),ht=function(e){var t=e.consignmentId,n=e.isMultiShippingMode,i=e.selectedShippingOptionId,a=e.shippingOption,r=i===a.id,o=(0,s.useCallback)((function(){return s.createElement("div",{className:"shippingOptionLabel"},s.createElement(pt.A,{displayAdditionalInformation:!0,method:a}),r&&!n&&s.createElement(Ge.Y,{region:"shipping.selectedShippingMethod"}))}),[r,n,a]);return s.createElement(mt,{htmlId:"shippingOptionRadio-".concat(t,"-").concat(a.id),label:o,value:a.id})};const gt=(0,s.memo)((function(e){var t=e.consignmentId,n=e.inputName,i=e.isLoading,a=e.isMultiShippingMode,r=e.shippingOptions,o=void 0===r?v.M:r,l=e.selectedShippingOptionId,d=e.onSelectedOption,c=(0,s.useCallback)((function(e){d(t,e)}),[t,d]);return o.length?s.createElement(R.A,{isLoading:i},s.createElement(dt,{"aria-live":"polite",defaultSelectedItemId:l,name:n,onSelect:c},o.map((function(e){return s.createElement(ht,{consignmentId:t,isMultiShippingMode:a,key:e.id,selectedShippingOptionId:l,shippingOption:e})})))):null}));var ft=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.selectDefaultShippingOptions=function(e){return(0,i.__awaiter)(t,[e],void 0,(function(e){var t,n,a,s,r,o,l,d,c,u=e.data;return(0,i.__generator)(this,(function(e){switch(e.label){case 0:return t=this.props,n=t.selectShippingOption,a=t.setFieldValue,s=(u.getConsignments()||[]).find((function(e){var t=e.selectedShippingOption,n=e.availableShippingOptions;return!t&&n})),s&&s.availableShippingOptions?(r=s.availableShippingOptions,o=s.id,l=Xe(r),d=1===r.length&&r[0],(c=l||d)?[4,n(o,c.id)]:[2]):[2];case 1:return e.sent(),a("shippingOptionIds.".concat(o),c.id),[2]}}))}))},t}return(0,i.__extends)(t,e),t.prototype.componentDidMount=function(){var e=this.props.subscribeToConsignments;this.unsubscribe=e(this.selectDefaultShippingOptions)},t.prototype.componentDidUpdate=function(){var e=this.props,t=e.analyticsTracker,n=e.consignments,i=e.shouldShowShippingOptions;(null==n?void 0:n.length)&&i&&t.showShippingMethods()},t.prototype.componentWillUnmount=function(){this.unsubscribe&&(this.unsubscribe(),this.unsubscribe=void 0)},t.prototype.render=function(){var e=this,t=this.props,n=t.consignments,i=t.isMultiShippingMode,a=t.selectShippingOption,r=t.isLoading,o=t.shouldShowShippingOptions,d=t.invalidShippingMessage,c=t.methodId;return(null==n?void 0:n.length)&&o?s.createElement(s.Fragment,null,n.map((function(t){return s.createElement("div",{className:"shippingOptions-container form-fieldset",key:t.id},i&&e.renderConsignment(t),s.createElement(gt,{consignmentId:t.id,inputName:(n=t.id,"shippingOptionIds.".concat(n)),isLoading:r(t.id),isMultiShippingMode:i,onSelectedOption:a,selectedShippingOptionId:t.selectedShippingOption&&t.selectedShippingOption.id,shippingOptions:t.availableShippingOptions}),(!t.availableShippingOptions||!t.availableShippingOptions.length)&&s.createElement(Ze.A,{additionalClassName:"shippingOptions-skeleton",isLoading:r(t.id),rows:2},e.renderNoShippingOptions(d)));var n}))):s.createElement(Ze.A,{additionalClassName:"shippingOptions-skeleton",isLoading:r(),rows:2},this.renderNoShippingOptions(s.createElement(l.A,{id:c||i?"shipping.select_shipping_address_text":"shipping.enter_shipping_address_text"})))},t.prototype.renderNoShippingOptions=function(e){return s.createElement("div",{className:"shippingOptions-panel optimizedCheckout-overlay"},s.createElement("p",{"aria-live":"polite",className:"shippingOptions-panel-message optimizedCheckout-primaryContent",role:"alert"},e))},t.prototype.renderConsignment=function(e){var t=this.props.cart;return s.createElement("div",{className:"staticConsignment"},s.createElement("strong",null,s.createElement(l.A,{id:"shipping.shipping_address_heading"})),s.createElement(De.A,{address:e.shippingAddress,type:Te.A.Shipping}),s.createElement($e.A,{cart:t,consignment:e}))},t}(s.PureComponent);const vt=(0,Ye.A)(ye({handleSubmit:a.noop,mapPropsToValues:function(e){var t=e.consignments,n={};return(t||[]).forEach((function(e){n[e.id]=e.selectedShippingOption?e.selectedShippingOption.id:""})),{shippingOptionIds:n}}})(ft));var St=(0,r.createSelector)((function(e){return e.checkoutService.subscribe}),(function(e){return function(t){return e(t,(function(e){return e.data.getConsignments()}))}})),At=(0,r.createSelector)((function(e,t){return t}),(function(e){return e.statuses.isLoadingShippingOptions}),(function(e){return e.statuses.isSelectingShippingOption}),(function(e){return e.statuses.isUpdatingConsignment}),(function(e){return e.statuses.isCreatingConsignments}),(function(e,t,n,i,a){return function(s){return e||t()||n(s)||i(s)||a()}}));const Et=(0,g.A)((function(e,t){var n=e.checkoutService,i=e.checkoutState,s=i.data,r=s.getCart,o=s.getConsignments,l=s.getConfig,d=s.getCustomer,c=s.getCheckout,u=i.statuses.isSelectingShippingOption,m=d(),p=r(),h=l(),g=c();if(!(h&&g&&m&&p))return null;var f=function(e,t){if(t.length<2)return t;var n=we(e,t),i=(0,a.uniq)((0,a.map)(n,"consignment.id"));return(0,a.sortBy)(t,(function(e){return i.indexOf(e.id)}))}(p,o()||[]),v=M(g,h);return{cart:p,consignments:f,invalidShippingMessage:h.checkoutSettings.shippingQuoteFailedMessage,isLoading:At(i,t.isUpdatingAddress),isSelectingShippingOption:u,methodId:v,selectShippingOption:n.selectConsignmentShippingOption,subscribeToConsignments:St({checkoutService:n,checkoutState:i})}}))(vt);const _t=function(e){var t=e.cartHasChanged,n=e.isMultiShippingMode,i=e.shouldShowOrderComments,a=e.shouldShowShippingOptions,r=void 0!==a&&a,o=e.shouldDisableSubmit,d=e.isInitialValueLoaded,c=e.isLoading;return s.createElement(s.Fragment,null,s.createElement(Ge.Y,{region:"shipping.shippingAddressForm.after"}),s.createElement(H.A,{id:"checkout-shipping-options",legend:s.createElement(s.Fragment,null,s.createElement(Je.A,null,s.createElement(l.A,{id:"shipping.shipping_method_label"})),t&&s.createElement(je.A,{type:je.v.Error},s.createElement("strong",null,s.createElement(l.A,{id:"shipping.cart_change_error"}))))},s.createElement(Et,{isInitialValueLoaded:d,isMultiShippingMode:n,isUpdatingAddress:c,shouldShowShippingOptions:r})),i&&s.createElement(Qe,null),s.createElement("div",{className:"form-actions"},s.createElement(U.Ay,{disabled:o,id:"checkout-shipping-continue",isLoading:c,type:"submit",variant:U.Ak.Primary},s.createElement(l.A,{id:"common.continue_action"}))))};var Ct=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={items:[]},t.handleCloseErrorModal=function(){t.setState({createCustomerAddressError:void 0})},t.handleSaveAddress=function(e){return(0,i.__awaiter)(t,void 0,void 0,(function(){var t,n,a,s;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:return t=this.props.createCustomerAddress,(n=this.state.itemAddingAddress)?(a=m(e),[4,this.handleSelectAddress(a,n.itemId,n.key)]):[2];case 1:i.sent(),i.label=2;case 2:return i.trys.push([2,4,,5]),[4,t(a)];case 3:return i.sent(),[3,5];case 4:return(s=i.sent())instanceof Error&&this.setState({createCustomerAddressError:s}),[3,5];case 5:return this.setState({itemAddingAddress:void 0}),[2]}}))}))},t.handleUseNewAddress=function(e,n){t.setState({itemAddingAddress:{key:n,itemId:e}})},t.handleCloseAddAddressForm=function(){t.setState({itemAddingAddress:void 0})},t.handleSelectAddress=function(e,n,a){return(0,i.__awaiter)(t,void 0,void 0,(function(){var t,s,r,o,l,d,c;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:if(t=this.props,s=t.assignItem,r=t.onUnhandledError,o=t.getFields,l=t.validateAddressFields,!(0,F.A)(e,o(e.countryCode),l))return[2,r(new be)];i.label=1;case 1:return i.trys.push([1,3,,4]),[4,s({address:e,lineItems:[{itemId:n,quantity:1}]})];case 2:return d=i.sent().data,this.syncItems(a,e,d),[3,4];case 3:return(c=i.sent())instanceof Error&&r(new Ie(c)),[3,4];case 4:return[2]}}))}))},t.shouldDisableSubmit=function(){var e=t.props,n=e.isLoading,i=e.consignments;return n||!(0,ke.A)(i)},t.syncItems=function(e,n,a){var s=t.state.items,r=function(e,t,n){var a=t.updatedItemIndex,s=t.address,r=n.cart,o=n.consignments;if(!(a<0||a>=e.length)&&r){var l=r.lineItems.physicalItems.map((function(e){return e.id})),d=(o||[]).find((function(e){return p(e.shippingAddress,s)})),c=function(e,t,n){if(t&&n){var i=t.lineItems.physicalItems.filter((function(t){var n=t.productId,i=t.variantId;return n===e.productId&&i===e.variantId})),a=i.map((function(e){return e.id}));return n.lineItemIds.find((function(e){return a.includes(e)}))}}(e[a],r,d);return e.map((function(e,t){if(c&&!l.includes(e.id)||t===a){var n=null!=c?c:e.id;return(0,i.__assign)((0,i.__assign)({},e),{id:n,consignment:Ne(o||[],n)})}return e}))}}(s,{updatedItemIndex:s.findIndex((function(t){return t.key===e})),address:n},{cart:a.getCart(),consignments:a.getConsignments()});r&&t.setState({items:r})},t}return(0,i.__extends)(t,e),t.getDerivedStateFromProps=function(e,t){var n=e.cart,i=e.consignments;return t&&t.items&&N(n)===t.items.length?null:{items:we(n,i)}},t.prototype.render=function(){var e=this,t=this.props,n=t.addresses,i=t.consignments,a=t.cart,r=t.cartHasChanged,o=t.shouldShowOrderComments,d=t.isInitialValueLoaded,c=t.isLoading,u=t.getFields,m=t.defaultCountryCode,p=t.countries,h=t.countriesWithAutocomplete,g=t.googleMapsApiKey,f=t.isFloatingLabelEnabled,v=this.state,S=v.items,A=v.itemAddingAddress,E=v.createCustomerAddressError;return s.createElement(s.Fragment,null,s.createElement(Ce.A,{error:E,message:s.createElement(s.Fragment,null,s.createElement(l.A,{id:"address.consignment_address_updated_text"})," ",s.createElement(l.A,{id:"customer.create_address_error"})),onClose:this.handleCloseErrorModal,shouldShowErrorCode:!1}),s.createElement(_e,{countries:p,countriesWithAutocomplete:h,defaultCountryCode:m,getFields:u,googleMapsApiKey:g,isFloatingLabelEnabled:f,isLoading:c,isOpen:!!A,onRequestClose:this.handleCloseAddAddressForm,onSaveAddress:this.handleSaveAddress}),s.createElement(T.A,null,s.createElement("ul",{className:"consignmentList"},S.map((function(t){return s.createElement("li",{key:t.key},s.createElement(Ke,{addresses:n,item:t,onSelectAddress:e.handleSelectAddress,onUseNewAddress:e.handleUseNewAddress}))}))),s.createElement(_t,{cartHasChanged:r,isInitialValueLoaded:d,isLoading:c,isMultiShippingMode:!0,shouldDisableSubmit:this.shouldDisableSubmit(),shouldShowOrderComments:o,shouldShowShippingOptions:!(0,Me.A)(i,a.lineItems)})))},t}(s.PureComponent);const yt=(0,L.A)(ye({handleSubmit:function(e,t){(0,t.props.onSubmit)(e)},mapPropsToValues:function(e){return{orderComment:e.customerMessage}},enableReinitialize:!0})(Ct));var bt=n(2156);const It=(0,bt.A)((function(){return s.createElement("svg",{height:"24",viewBox:"0 0 24 24",width:"24",xmlns:"http://www.w3.org/2000/svg"},s.createElement("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z"}))}));const Nt=(0,bt.A)((function(){return s.createElement("svg",{height:"24",viewBox:"0 0 24 24",width:"24",xmlns:"http://www.w3.org/2000/svg"},s.createElement("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}))}));const wt=(0,bt.A)((function(){return s.createElement("svg",{height:"24",viewBox:"0 0 24 24",width:"24",xmlns:"http://www.w3.org/2000/svg"},s.createElement("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z"}))}));var kt;!function(e){e.Error="error",e.Info="info",e.Success="success",e.Warning="warning"}(kt||(kt={}));const Mt=function(e){var t=e.additionalClassName,n=e.children,i=e.icon,a=e.testId,r=e.type;return s.createElement("div",{className:$()("alertBox",t,{"alertBox--info":r===kt.Info||!r},{"alertBox--error":r===kt.Error},{"alertBox--success":r===kt.Success},{"alertBox--warning":r===kt.Warning}),"data-test":a},s.createElement("div",{className:"alertBox-column alertBox-icon"},i||function(e){switch(e){case kt.Error:case kt.Warning:return s.createElement(It,null);case kt.Success:return s.createElement(Nt,null);case kt.Info:default:return s.createElement(wt,null)}}(r)),s.createElement("div",{"aria-live":"assertive",className:"alertBox-column alertBox-message",role:"alert"},n))};var Ot=n(53133),Lt=n(45080),Ft=function(e,t,n){return(0,i.__awaiter)(void 0,void 0,void 0,(function(){var a,s,r,o,l,d,c;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:a=new Map(e.map((function(e){var t;return[e.id,null===(t=e.selectedShippingOption)||void 0===t?void 0:t.id]}))),s=0,r=t,i.label=1;case 1:return s<r.length?(o=r[s]).selectedShippingOption?[3,5]:(l=a.get(o.id))?[4,n(o.id,l)]:[3,3]:[3,6];case 2:return i.sent(),[3,5];case 3:return(d=null===(c=o.availableShippingOptions)||void 0===c?void 0:c.find((function(e){return e.isRecommended})))?[4,n(o.id,d.id)]:[3,5];case 4:i.sent(),i.label=5;case 5:return s++,[3,1];case 6:return[2]}}))}))};const Pt=function(e){var t=e.consignment,n=e.countriesWithAutocomplete,a=e.defaultCountryCode,r=e.isLoading,o=e.onUnhandledError,d=e.selectedAddress,c=e.setConsignmentRequest,u=(0,s.useState)(!1),p=u[0],h=u[1],g=(0,s.useState)(),A=g[0],E=g[1],_=(0,Ue.Q)(),C=_.checkoutState.data,y=C.getShippingCountries,b=C.getCustomer,I=C.getConfig,N=C.getConsignments,w=C.getShippingAddressFields,k=_.checkoutService,M=k.updateConsignment,O=k.createCustomerAddress,L=k.selectConsignmentShippingOption,P=y()||v.M,x=b(),U=I();if(!U||!x)return null;var T=(0,S.A)(U.checkoutSettings),R=x.addresses||v.M,z=U.checkoutSettings.googleMapsApiKey,B=(0,f.A)(U.checkoutSettings,"CHECKOUT-7560.address_fields_max_length_validation"),D=function(e){return(0,i.__awaiter)(void 0,void 0,void 0,(function(){var n,a,s,r;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:if(!(0,F.A)(e,w(e.countryCode),B))return[2,o(new be)];if(!t)return null==c||c({address:e,shippingAddress:e,lineItems:[]}),[2];i.label=1;case 1:return i.trys.push([1,5,,6]),[4,M({id:t.id,address:e,shippingAddress:e,lineItems:t.lineItems.map((function(e){return{itemId:e.id,quantity:e.quantity}}))})];case 2:return n=i.sent().data.getConsignments,(a=n())&&a.length>0?[4,Ft(null!==(r=N())&&void 0!==r?r:[],a,L)]:[3,4];case 3:i.sent(),i.label=4;case 4:return[3,6];case 5:return(s=i.sent())instanceof Error&&o(new Ie(s)),[3,6];case 6:return[2]}}))}))};return s.createElement(s.Fragment,null,s.createElement(Ce.A,{error:A,message:s.createElement(s.Fragment,null,s.createElement(l.A,{id:"address.consignment_address_updated_text"})," ",s.createElement(l.A,{id:"customer.create_address_error"})),onClose:function(){E(void 0)},shouldShowErrorCode:!1}),s.createElement(_e,{countries:P,countriesWithAutocomplete:n,defaultCountryCode:a,getFields:w,googleMapsApiKey:z,isFloatingLabelEnabled:T,isLoading:r,isOpen:p,onRequestClose:function(){h(!1)},onSaveAddress:function(e){return(0,i.__awaiter)(void 0,void 0,void 0,(function(){var t,n;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:return t=m(e),[4,D(t)];case 1:i.sent(),i.label=2;case 2:return i.trys.push([2,4,,5]),[4,O(t)];case 3:return i.sent(),[3,5];case 4:return(n=i.sent())instanceof Error&&E(n),[3,5];case 5:return h(!1),[2]}}))}))}}),s.createElement(We,{addresses:R,onSelectAddress:D,onUseNewAddress:function(){h(!0)},placeholderText:s.createElement(l.A,{id:"shipping.choose_shipping_address"}),selectedAddress:d,showSingleLineAddress:!0,type:Te.A.Shipping}))};var xt=n(83651),Ut=n(15735),Tt=n(11100),Rt=n(63163),zt=n(81339);const Bt=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={shouldShow:!1},t.handleShow=function(){t.setState({shouldShow:!0})},t.handleHide=function(){t.setState({shouldShow:!1})},t}return(0,i.__extends)(t,e),t.prototype.render=function(){var e=this,t=this.props,n=t.children,i=t.placement,a=t.tooltip,r=this.state.shouldShow;return s.createElement(Pe.mS,null,s.createElement(Pe.Or,null,(function(t){var i=t.ref;return s.createElement("span",{onBlur:e.handleHide,onFocus:e.handleShow,onMouseEnter:e.handleShow,onMouseLeave:e.handleHide,ref:i},n)})),s.createElement(Pe.ND,{modifiers:{hide:{enabled:!1},flip:{enabled:!1},preventOverflow:{enabled:!1}},placement:i},(function(e){var t=e.ref,n=e.style;return r&&s.createElement("div",{ref:t,style:n},a)})))},t.defaultProps={placement:"bottom"},t}(s.Component);const Dt=(0,bt.A)((function(){return s.createElement("svg",{height:"24",viewBox:"0 0 24 24",width:"24",xmlns:"http://www.w3.org/2000/svg"},s.createElement("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 17h-2v-2h2v2zm2.07-7.75l-.9.92C13.45 12.9 13 13.5 13 15h-2v-.5c0-1.1.45-2.1 1.17-2.83l1.24-1.26c.37-.36.59-.86.59-1.41 0-1.1-.9-2-2-2s-2 .9-2 2H8c0-2.21 1.79-4 4-4s4 1.79 4 4c0 .88-.36 1.68-.93 2.25z"}))}));const Vt=function(e){var t=e.children,n=e.testId;return s.createElement("span",{className:"tooltip tooltip--basic","data-test":n},t)};var Ht=function(){return s.createElement(Bt,{placement:"right-start",tooltip:s.createElement(Vt,null,s.createElement(l.A,{id:"shipping.multishipping_item_split_tooltip_message"}))},s.createElement("span",{className:"item-split-tooltip","data-test":"split-item-tooltip"},s.createElement(Dt,null)))};const Wt=function(e){var t=e.assignedItems,n=e.onUnassignItem;return s.createElement("div",{className:"allocated-line-items"},s.createElement("h3",null,s.createElement(l.A,{data:{count:t.shippableItemsCount},id:"shipping.multishipping_item_allocated_message"}),t.hasSplitItems&&s.createElement(Ht,null)),s.createElement("ul",{className:"allocated-line-items-list"},t.lineItems.map((function(e){return s.createElement("li",{key:e.id},(0,zt.h)(e),s.createElement("span",{"data-test":"remove-".concat(e.id.toString(),"-button"),onClick:function(){return n(e)}},s.createElement(Ot.A,null)))}))))};const Kt=function(e){var t,n=e.item,a=e.error,r=(0,Tt.A)();return s.createElement("tr",null,s.createElement("td",{className:"left-to-allocate-item-name-container"},s.createElement("figure",{className:"left-to-allocate-item-figure"},n.imageUrl&&s.createElement("img",{alt:n.name,src:n.imageUrl})),s.createElement("div",null,s.createElement("p",{className:"left-to-allocate-item-name"},n.name),null===(t=n.options)||void 0===t?void 0:t.map((function(e){return s.createElement("p",{className:"left-to-allocate-item-option",key:e.nameId},e.name,": ",e.value)})))),!r&&s.createElement("td",null,n.quantity),s.createElement("td",null,r&&s.createElement(l.A,{data:{count:n.quantity},id:"shipping.multishipping_left_to_allocate_message"}),s.createElement(te.A,{additionalClassName:a?"form-field--error":"",input:function(e){var t=e.field;return s.createElement(qe.A,(0,i.__assign)({},t,{"aria-label":"Quantity of ".concat(n.name),disabled:0===n.quantity,id:t.name,min:0,type:"number"}))},name:n.id.toString()})))};const Gt=function(e){var t=e.items,n=e.formErrors,i=(0,Tt.A)();return s.createElement("table",{className:"table left-to-allocate-items-table"},s.createElement("thead",null,s.createElement("tr",null,s.createElement("th",null,s.createElement(l.A,{id:"shipping.multishipping_left_to_allocate_items_table_item"})),!i&&s.createElement("th",null,s.createElement(l.A,{id:"shipping.multishipping_left_to_allocate_items_table_left_to_allocate"})),s.createElement("th",null,s.createElement(l.A,{id:"shipping.multishipping_left_to_allocate_items_table_quantity"})))),s.createElement("tbody",null,t.map((function(e){return s.createElement(Kt,{error:n[e.id.toString()],item:e,key:e.id})}))))};var qt;!function(e){e[e.Physical=0]="Physical",e[e.Digital=1]="Digital",e[e.GiftCertificate=2]="GiftCertificate",e[e.Custom=3]="Custom"}(qt||(qt={}));const Jt=(0,L.A)(ye({handleSubmit:function(e,t){(0,t.props.onAllocateItems)(Object.keys(e).filter((function(t){return e[t]>0})).map((function(t){return{itemId:t,quantity:e[t]}})))},mapPropsToValues:function(e){var t=e.unassignedItems,n={};return t.lineItems.forEach((function(e){n[e.id.toString()]=0})),n},enableReinitialize:!0,validationSchema:function(e){var t=e.language,n=e.unassignedItems,i=function(e){var n=(0,x.ai)().required(t.translate("shipping.quantity_required_error")).integer(t.translate("shipping.quantity_invalid_error")).min(0,t.translate("shipping.quantity_min_error")).max(e.quantity,t.translate("shipping.quantity_max_error"));return e.type===qt.Custom?n.oneOf([0,e.quantity],t.translate("shipping.custom_item_quantity_error")):n},a=Object.fromEntries(n.lineItems.map((function(e){return[e.id.toString(),i(e)]})));return(0,x.Ik)().shape(a)},validateOnBlur:!0,validateOnChange:!1})((function(e){var t=e.consignmentNumber,n=e.isOpen,i=e.onRequestClose,a=e.address,r=e.assignedItems,o=e.unassignedItems,d=e.setValues,c=e.values,u=e.dirty,m=e.submitForm,p=e.errors,h=e.onUnassignItem,g=e.isLoading,f=(0,s.useMemo)((function(){var e=o.shippableItemsCount;if(c&&u){var t=Object.keys(c).reduce((function(e,t){return c[t]>0&&(e+=c[t]),e}),0);return s.createElement(l.A,{data:{count:"".concat(t,"/").concat(e)},id:"shipping.multishipping_items_selected_message"})}return s.createElement(l.A,{data:{count:e},id:"shipping.multishipping_item_to_allocate_message"})}),[c]),v=(0,s.useMemo)((function(){return Object.keys(p).reduce((function(e,t){var n=p[t];return n&&e.push(n),Array.from(new Set(e))}),[])}),[p]),S=!!r&&r.lineItems.length>0&&!!h,A=!!o&&o.lineItems.length>0,E=s.createElement(s.Fragment,null,s.createElement(U.Ay,{disabled:g,onClick:i,variant:Rt.Ak.Secondary},s.createElement(l.A,{id:"shipping.multishipping_items_allocate_cancel"})),s.createElement(U.Ay,{disabled:!S&&!u,isLoading:g,onClick:m,type:"submit",variant:Rt.Ak.Primary},S?s.createElement(l.A,{id:"shipping.multishipping_items_allocate_save"}):s.createElement(l.A,{id:"shipping.multishipping_items_allocate_allocate"})));return s.createElement(z.A,{additionalModalClassName:"allocate-items-modal",footer:E,header:s.createElement(s.Fragment,null,s.createElement(B.A,null,s.createElement(l.A,{data:{consignmentNumber:t},id:"shipping.multishipping_consignment_index_heading"})),s.createElement("h4",null,ze(a))),isOpen:n,onRequestClose:i},s.createElement(T.A,null,v.length>0&&s.createElement("div",{className:"form-errors"},v.map((function(e,t){return s.createElement(Mt,{key:t,type:kt.Error},e)}))),o.hasDigitalItems&&s.createElement(Mt,{type:kt.Info},s.createElement(l.A,{id:"shipping.multishipping_digital_item_no_shipping_banner"})),S&&s.createElement(Wt,{assignedItems:r,onUnassignItem:h}),A?s.createElement(s.Fragment,null,s.createElement("div",{className:"left-to-allocate-items-table-actions"},s.createElement("p",null,f,o.hasSplitItems&&s.createElement(Ht,null)),s.createElement("div",{className:"button-group"},s.createElement("a",{"data-test":"clear-all-items-button",href:"#",onClick:(0,Oe.A)((function(){var e={};o.lineItems.forEach((function(t){e[t.id.toString()]=0})),d(e)}))},s.createElement(l.A,{id:"shipping.multishipping_items_allocate_clear_all"})),s.createElement("a",{"data-test":"allocate-all-items-button",href:"#",onClick:(0,Oe.A)((function(){var e={};o.lineItems.forEach((function(t){e[t.id.toString()]=t.quantity})),d(e)}))},s.createElement(l.A,{id:"shipping.multishipping_items_allocate_select_all_items_left"})))),s.createElement(Gt,{formErrors:p,items:o.lineItems})):null))})));var Qt=function(e){return btoa(encodeURIComponent(e.join("-")))};var jt=function(e){return e.reduce((function(e,t){return e+t.quantity}),0)},Zt=function(e,t){for(var n=new Set,i=0,a=e;i<a.length;i++){var s=a[i],r=t.get(s.id.toString());if(r){if(n.has(r))return!0;n.add(r)}}return!1};function Yt(e,t){var n,a=new Map,s=new Map,r=new Map,o=[];e.physicalItems.forEach((function(e){a.set(e.id.toString(),(0,i.__assign)((0,i.__assign)({},e),{type:qt.Physical})),r.set(e.id.toString(),function(e){return Qt([e.productId.toString(),e.variantId.toString(),e.sku,(t=e.options,t?Qt(t.map((function(e){return Qt([e.name,e.nameId.toString(),e.value,e.valueId?e.valueId.toString():""])}))):"")]);var t}(e))})),null===(n=e.customItems)||void 0===n||n.forEach((function(e){return a.set(e.id,(0,i.__assign)((0,i.__assign)({},e),{type:qt.Custom}))})),e.digitalItems.forEach((function(e){return s.set(e.id.toString(),(0,i.__assign)((0,i.__assign)({},e),{type:qt.Digital}))})),t.forEach((function(e,t){var n=[];e.lineItemIds.forEach((function(e){var t=a.get(e);t&&(n.push(t),a.delete(e))})),o.push((0,i.__assign)((0,i.__assign)({},e),{consignmentNumber:t+1,hasDigitalItems:!1,hasSplitItems:Zt(n,r),shippableItemsCount:jt(n),lineItems:n}))}));var l=Array.from(a.values()),d={lineItems:l,hasDigitalItems:s.size>0,hasSplitItems:Zt(l,r),shippableItemsCount:jt(l)};return{consignmentList:o,unassignedItems:d}}var Xt={unassignedItems:{lineItems:[],hasDigitalItems:!1,hasSplitItems:!1,shippableItemsCount:0},consignmentList:[]},$t=function(){var e=(0,(0,Ue.Q)().checkoutState.data.getCheckout)();if(!e)return Xt;var t=e.cart.lineItems,n=e.consignments,a=function(e){return(0,i.__assign)((0,i.__assign)({},e),{physicalItems:e.physicalItems.filter((function(e){return"string"!=typeof e.parentId})),digitalItems:e.digitalItems.filter((function(e){return"string"!=typeof e.parentId}))})}(t),s=Yt(a,n),r=s.consignmentList;return{unassignedItems:s.unassignedItems,consignmentList:r}};const en=function(e){var t=e.consignmentNumber,n=e.consignment,a=e.onUnhandledError,r=e.isLoading,o=(0,s.useState)(!1),d=o[0],c=o[1],u=(0,s.useState)(!0),m=u[0],p=u[1],h=$t().unassignedItems,g=(0,Ue.Q)().checkoutService.assignItemsToAddress,f=function(){var e=(0,Ue.Q)().checkoutService,t=e.createConsignments,n=e.deleteConsignment;return function(e,a,s){return(0,i.__awaiter)(void 0,void 0,void 0,(function(){var r,o,l,d;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:return r=s.id,s.lineItemIds.length>1?[4,t([e])]:[3,2];case 1:o=i.sent(),l=o.data.getConsignments(),r=null===(d=null==l?void 0:l.find((function(e){return e.lineItemIds.find((function(e){return e===a}))})))||void 0===d?void 0:d.id,i.label=2;case 2:if(!r)throw new Error("Unable to find consignment to delete");return n(r),[2]}}))}))}}(),v=function(){c(!d)},S=(0,Tt.A)(),A=n.shippableItemsCount;return s.createElement("div",null,s.createElement(Jt,{address:n.shippingAddress,assignedItems:n,consignmentNumber:t,isLoading:r,isOpen:d,onAllocateItems:function(e){return(0,i.__awaiter)(void 0,void 0,void 0,(function(){var t;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,3,4]),[4,g({address:n.address,lineItems:e})];case 1:return i.sent(),[3,4];case 2:return(t=i.sent())instanceof Error&&a(new Ie(t)),[3,4];case 3:return v(),[7];case 4:return[2]}}))}))},onRequestClose:v,onUnassignItem:function(e){return(0,i.__awaiter)(void 0,void 0,void 0,(function(){var t,s;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),t={address:n.address,shippingAddress:n.shippingAddress,lineItems:[{quantity:e.quantity,itemId:e.id}]},[4,f(t,e.id.toString(),n)];case 1:return i.sent(),[3,3];case 2:return(s=i.sent())instanceof Error&&a(new b(s)),[3,3];case 3:return[2]}}))}))},unassignedItems:h}),s.createElement("div",{className:"consignment-line-item-header"},s.createElement("div",null,s.createElement("h3",null,"".concat(A,A>1?" items":" item")," allocated "),n.hasSplitItems&&s.createElement(Ht,null),s.createElement("a",{className:"expand-items-button","data-test":"expand-items-button",href:"#",onClick:(0,Oe.A)((function(){p(!m)}))},m?s.createElement(s.Fragment,null,!S&&s.createElement(l.A,{id:"shipping.multishipping_item_hide_items_message"}),s.createElement(xt.A,null)):s.createElement(s.Fragment,null,!S&&s.createElement(l.A,{id:"shipping.multishipping_item_show_items_message"}),s.createElement(Ut.A,null)))),s.createElement("a",{"data-test":"reallocate-items-button",href:"#",onClick:(0,Oe.A)(v)},s.createElement(l.A,{id:"shipping.multishipping_item_reallocated_message"}))),m?s.createElement(zt.A,{lineItems:n.lineItems}):null)};const tn=(0,s.memo)((function(e){return e.isLoading?s.createElement("div",{"aria-busy":"true",className:"loadingSpinner loadingOverlay-container",role:"status",style:{height:100}},s.createElement("div",{className:"loadingOverlay optimizedCheckout-overlay"})):null}));const nn=function(e){var t=e.children,n=e.hideContentWhenLoading,i=e.unmountContentWhenLoading,a=e.isLoading;return n||i?s.createElement(s.Fragment,null,s.createElement(tn,{isLoading:a}),i&&a?null:s.createElement("div",{style:{display:n&&a?"none":void 0}},t)):s.createElement("div",{className:"loadingOverlay-container"},t,a&&s.createElement("div",{className:"loadingOverlay optimizedCheckout-overlay","data-test":"loading-overlay"}))};const an=(0,s.forwardRef)((function(e,t){var n=e.testId,a=(0,i.__rest)(e,["testId"]);return s.createElement("input",(0,i.__assign)({},a,{"data-test":n,ref:t}))}));const sn=function(e){var t=e.children,n=e.className,a=e.hidden,r=e.testId,o=(0,i.__rest)(e,["children","className","hidden","testId"]);return s.createElement("label",(0,i.__assign)({},o,{className:$()(n||"form-label",{"is-srOnly":a},"optimizedCheckout-form-label"),"data-test":r}),t)};const rn=(0,s.forwardRef)((function(e,t){var n=e.additionalClassName,a=e.label,r=e.value,o=e.checked,l=e.id,d=(0,i.__rest)(e,["additionalClassName","label","value","checked","id"]);return s.createElement(s.Fragment,null,s.createElement(an,(0,i.__assign)({},d,{checked:o,className:$()("form-radio","optimizedCheckout-form-radio",n),id:l,ref:t,type:"radio",value:r})),s.createElement(sn,{htmlFor:l},a))}));var on=n(21277),ln=function(e){var t=e.consignmentId,n=e.selectedShippingOptionId,i=e.shippingOption,a=e.handleSelect,r=s.createElement(s.Fragment,null,"".concat(i.description," - "),s.createElement(on.A,{amount:i.cost}));return s.createElement("ul",{className:"shipping-option-item"},s.createElement(rn,{checked:n===i.id,id:"shippingOption-".concat(t,"-").concat(i.id),key:"key-".concat(t,"-").concat(i.id),label:r,name:"".concat(t,"-shippingMethod"),onClick:function(){a(t,i.id)},readOnly:!0,value:i.id}))};const dn=(0,s.memo)((function(e){var t=e.consignmentId,n=e.isLoading,i=e.shippingOptions,a=e.selectedShippingOptionId,r=e.onSelectedOption;return s.createElement(nn,{isLoading:n},i.map((function(e){return s.createElement(ln,{consignmentId:t,handleSelect:r,key:e.id,selectedShippingOptionId:a,shippingOption:e})})))}));var cn=function(e){var t=e.consignment,n=e.isLoading,a=e.resetErrorConsignmentNumber,r=e.shippingQuoteFailedMessage,o=(0,Ue.Q)(),d=o.checkoutService,c=o.checkoutState,u=At(c,n)(t.id);return s.createElement("div",null,s.createElement("h3",{className:"shipping-option-header"},s.createElement(l.A,{id:"shipping.shipping_method_label"})),(!t.availableShippingOptions||!t.availableShippingOptions.length)&&s.createElement(Mt,{type:kt.Error},r),Boolean(t.availableShippingOptions)&&t.availableShippingOptions&&s.createElement(dn,{consignmentId:t.id,isLoading:u,onSelectedOption:function(e,t){return(0,i.__awaiter)(void 0,void 0,void 0,(function(){return(0,i.__generator)(this,(function(n){switch(n.label){case 0:return[4,d.selectConsignmentShippingOption(e,t)];case 1:return n.sent(),a(),[2]}}))}))},selectedShippingOptionId:t.selectedShippingOption&&t.selectedShippingOption.id,shippingOptions:t.availableShippingOptions}))};const un=function(e){var t=e.consignment,n=e.consignmentNumber,a=e.countriesWithAutocomplete,r=e.defaultCountryCode,o=e.isLoading,d=e.shippingQuoteFailedMessage,c=e.onUnhandledError,u=e.resetErrorConsignmentNumber,m=(0,Ue.Q)().checkoutService.deleteConsignment;return s.createElement("div",{className:"consignment-container"},s.createElement("div",{className:"consignment-header"},s.createElement("h3",null,s.createElement(l.A,{data:{consignmentNumber:n},id:"shipping.multishipping_consignment_index_heading"})),s.createElement("a",{className:"delete-consignment","data-test":"delete-consignment-button",href:"#",onClick:(0,Oe.A)((function(){return(0,i.__awaiter)(void 0,void 0,void 0,(function(){return(0,i.__generator)(this,(function(e){switch(e.label){case 0:return[4,m(t.id)];case 1:return e.sent(),u(),[2]}}))}))}))},s.createElement(Ot.A,{size:Lt.l.Small}))),s.createElement(Pt,{consignment:t,countriesWithAutocomplete:a,defaultCountryCode:r,isLoading:o,onUnhandledError:c,selectedAddress:t.shippingAddress}),s.createElement(en,{consignment:t,consignmentNumber:n,isLoading:o,onUnhandledError:c}),s.createElement(cn,{consignment:t,isLoading:o,resetErrorConsignmentNumber:u,shippingQuoteFailedMessage:d}))};const mn=function(e){var t=e.shouldShowOrderComments,n=e.shouldDisableSubmit,i=e.isLoading,a=e.cartHasChanged;return s.createElement(T.A,null,a&&s.createElement(je.A,{type:je.v.Error},s.createElement("strong",null,s.createElement(l.A,{id:"shipping.cart_change_error"}))),t&&s.createElement(Qe,null),s.createElement("div",{className:"form-actions"},s.createElement(U.Ay,{disabled:n,id:"checkout-shipping-continue",isLoading:i,type:"submit",variant:U.Ak.Primary},s.createElement(l.A,{id:"common.continue_action"}))))};const pn=function(e){var t=e.consignmentNumber,n=e.countriesWithAutocomplete,r=e.defaultCountryCode,o=e.isLoading,d=e.onUnhandledError,c=e.resetErrorConsignmentNumber,u=e.setIsAddShippingDestination,m=(0,s.useState)(),p=m[0],h=m[1],g=(0,s.useState)(!1),f=g[0],S=g[1],A=$t().unassignedItems,E=(0,Ue.Q)(),_=E.checkoutState.data,C=_.getShippingCountries,y=_.getConsignments,b=E.checkoutService,I=b.assignItemsToAddress,N=b.selectConsignmentShippingOption,w=(0,s.useMemo)((function(){if(null==p?void 0:p.address){var e=C()||v.M,t=(0,a.find)(e,{code:p.address.countryCode});return(0,i.__assign)((0,i.__assign)({},p.address),{country:t?t.name:p.address.countryCode})}}),[p]),k=function(){S(!f)};return s.createElement("div",{className:"consignment-container"},s.createElement("div",{className:"consignment-header"},s.createElement("h3",null,s.createElement(l.A,{data:{consignmentNumber:t},id:"shipping.multishipping_consignment_index_heading"}))),s.createElement(Pt,{countriesWithAutocomplete:n,defaultCountryCode:r,isLoading:o,onUnhandledError:d,selectedAddress:w,setConsignmentRequest:h}),w&&s.createElement(s.Fragment,null,s.createElement(Jt,{address:w,consignmentNumber:t,isLoading:o,isOpen:f,onAllocateItems:function(e){return(0,i.__awaiter)(void 0,void 0,void 0,(function(){var t,n,a,s;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:if(!w)return[2];i.label=1;case 1:return i.trys.push([1,3,4,7]),[4,I({address:w,lineItems:e})];case 2:return n=i.sent().data.getConsignments,t=n(),[3,7];case 3:return(a=i.sent())instanceof Ie&&d(a),[3,7];case 4:return k(),u(!1),c(),t&&t.length>0?[4,Ft(null!==(s=y())&&void 0!==s?s:[],t,N)]:[3,6];case 5:i.sent(),i.label=6;case 6:return[7];case 7:return[2]}}))}))},onRequestClose:k,unassignedItems:A}),s.createElement("div",{className:"new-consignment-line-item-header"},s.createElement("h3",null,s.createElement(l.A,{id:"shipping.multishipping_no_item_allocated_message"})),s.createElement("a",{"data-test":"allocate-items-button",href:"#",onClick:(0,Oe.A)(k)},s.createElement(l.A,{id:"shipping.multishipping_allocate_items"})))))};const hn=(0,L.A)(ye({handleSubmit:function(e,t){(0,t.props.onSubmit)(e)},mapPropsToValues:function(e){return{orderComment:e.customerMessage}},enableReinitialize:!0})((function(e){var t=e.countriesWithAutocomplete,n=e.defaultCountryCode,i=e.isLoading,a=e.onUnhandledError,r=e.cartHasChanged,o=(0,s.useState)(),d=o[0],c=o[1],u=(0,Ue.Q)().checkoutState.data,m=u.getConsignments,p=u.getConfig,h=$t(),g=h.unassignedItems,f=g.lineItems,S=g.shippableItemsCount,A=h.consignmentList,E=m()||v.M,_=p(),C=(0,s.useState)(0===E.length),y=C[0],b=C[1],I=(0,ke.A)(E),N=(0,s.useMemo)((function(){return i||!!f.length||!I}),[i,E]);if(!_)return null;var w=_.checkoutSettings,k=w.enableOrderComments,M=w.shippingQuoteFailedMessage,O=S>0,L=function(){c(void 0)};return s.createElement(s.Fragment,null,function(e){return e>0?s.createElement(Mt,{type:kt.Info},s.createElement(l.A,{data:{count:e},id:"shipping.multishipping_item_to_allocate_message"})):s.createElement(Mt,{type:kt.Success},s.createElement(l.A,{id:"shipping.multishipping_all_items_allocated_message"}))}(S),A.map((function(e){return s.createElement(un,{consignment:e,consignmentNumber:e.consignmentNumber,countriesWithAutocomplete:t,defaultCountryCode:n,isLoading:i,key:e.id,onUnhandledError:a,resetErrorConsignmentNumber:L,shippingQuoteFailedMessage:M})})),y&&s.createElement(pn,{consignmentNumber:0===E.length?1:E.length+1,countriesWithAutocomplete:t,defaultCountryCode:n,isLoading:i,onUnhandledError:a,resetErrorConsignmentNumber:L,setIsAddShippingDestination:b}),O&&s.createElement(U.Ay,{className:"add-consignment-button",onClick:function(){if(y||I)y?c(E.length+1):(c(void 0),b(!0));else{var e=E.findIndex((function(e){return!e.selectedShippingOption}));if(-1===e)return void b(!0);c(e+1)}},variant:U.Ak.Secondary},s.createElement(l.A,{id:"shipping.multishipping_add_new_destination"})),Boolean(d)&&s.createElement("div",{className:"form-field--error"},s.createElement("span",{className:"form-inlineMessage"},s.createElement(l.A,{data:{consignmentNumber:d},id:"shipping.multishipping_incomplete_consignment_error"}))),s.createElement(mn,{cartHasChanged:r,isLoading:i,shouldDisableSubmit:N,shouldShowOrderComments:k}))})));var gn=n(50708);const fn=function(e){var t=e.onSignIn,n=e.onCreateAccount;return s.createElement("div",{className:"checkout-step-info"},s.createElement(l.A,{id:"shipping.multishipping_guest_intro"})," ",s.createElement("a",{"data-test":"shipping-sign-in-link",href:"#",onClick:(0,Oe.A)(t)},s.createElement(l.A,{id:"shipping.multishipping_guest_sign_in"}))," ",s.createElement(gn.A,{id:"shipping.multishipping_guest_create",onClick:n}))};var vn=n(9343),Sn=n(22011),An=n(10685);const En=(0,s.memo)((function(e){var t=e.onChange,n=(0,s.useMemo)((function(){return s.createElement(l.A,{id:"billing.use_shipping_address_label"})}),[]);return s.createElement(K.A,{id:"sameAsBilling",labelContent:n,name:"billingSameAsShipping",onChange:t,testId:"billingSameAsShipping"})}));var _n=n(82922);const Cn=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleFieldValueChange=function(e){return function(n){(0,t.props.onFieldChange)(e,n)}},t}return(0,i.__extends)(t,e),t.prototype.componentDidMount=function(){return(0,i.__awaiter)(this,void 0,void 0,(function(){var e,t,n,s,r,o;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:e=this.props,t=e.initialize,n=e.methodId,s=e.onUnhandledError,r=void 0===s?a.noop:s,i.label=1;case 1:return i.trys.push([1,3,,4]),[4,t({methodId:n})];case 2:return i.sent(),[3,4];case 3:return o=i.sent(),r(o),[3,4];case 4:return[2]}}))}))},t.prototype.componentWillUnmount=function(){return(0,i.__awaiter)(this,void 0,void 0,(function(){var e,t,n,s,r,o;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:e=this.props,t=e.deinitialize,n=e.methodId,s=e.onUnhandledError,r=void 0===s?a.noop:s,i.label=1;case 1:return i.trys.push([1,3,,4]),[4,t({methodId:n})];case 2:return i.sent(),[3,4];case 3:return o=i.sent(),r(o),[3,4];case 4:return[2]}}))}))},t.prototype.render=function(){var e=this,t=this.props,n=t.address,i=t.buttonId,a=t.formFields,r=t.isLoading,o=a.filter((function(e){return e.custom})),d=o.length>0;return s.createElement(R.A,{isLoading:r},s.createElement("div",{className:"stepHeader",style:{padding:0}},s.createElement("div",{className:"stepHeader-body subheader"},s.createElement(De.A,{address:n})),s.createElement("div",{className:"stepHeader-actions subheader"},s.createElement(U.Ay,{id:i,onClick:(0,Oe.A)(),size:U.Mp.Tiny,testId:"step-edit-button",variant:U.Ak.Secondary},s.createElement(l.A,{id:"common.edit_action"})))),d&&s.createElement(H.A,{id:"customFieldset"},o.map((function(t){return s.createElement(W.A,{field:t,key:"".concat(t.id,"-").concat(t.name),onChange:e.handleFieldValueChange(t.name),parentFieldName:"shippingAddress.customFields"})}))))},t}(s.PureComponent);var yn=function(e){var t=e.methodId,n=e.formFields,a=e.onFieldChange,r=e.initialize,o=e.deinitialize,l=e.shippingAddress,d=e.isShippingStepPending,c=(0,s.useCallback)((0,D.memoizeOne)((function(e){return function(t){return r((0,i.__assign)((0,i.__assign)({},e),t))}})),[]),u="edit-ship-button",m={amazonpay:{editAddressButtonId:u}};return s.createElement(Cn,{address:l,buttonId:u,deinitialize:o,formFields:n,initialize:c(m),isLoading:d,methodId:t,onFieldChange:a})},bn=n(83030),In=n(67313);const Nn=(0,s.forwardRef)((function(e,t){var n=e.additionalClassName,a=e.children,r=e.className,o=e.legend,l=e.testId,d=(0,i.__rest)(e,["additionalClassName","children","className","legend","testId"]);return s.createElement("fieldset",(0,i.__assign)({},d,{className:r||$()("form-fieldset",n),"data-test":l,ref:t}),o,s.createElement("div",{className:"form-body"},a))}));const wn=(0,s.memo)((function(e){var t=e.additionalClassName,n=e.children,i=e.className,a=e.hasError,r=e.testId;return s.createElement(vn.Ay.Consumer,null,(function(e){var o=e.isSubmitted;return s.createElement("div",{className:i||$()("form-field",t,{"form-field--error":a&&o}),"data-test":r},n)}))}));var kn=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,i.__extends)(t,e),t.prototype.componentDidUpdate=function(e){var t=e.field,n=this.props,i=n.field.value,s=n.onChange,r=void 0===s?a.noop:s;((0,a.isDate)(i)?i.getTime():i)!==((0,a.isDate)(t.value)?t.value.getTime():t.value)&&r(i)},t.prototype.render=function(){var e=this.props,t=e.component,n=void 0===t?"input":t,i=e.field,a=e.render;return a?a(this.props):"string"==typeof n?(0,s.createElement)(n,i):(0,s.createElement)(n,this.props)},t}(s.Component),Mn=(0,s.memo)((function(e){var t=e.additionalClassName,n=e.component,i=e.field,a=e.form,r=e.onChange,o=e.render,l=e.testId,d=(0,s.useMemo)((function(){return s.createElement(kn,{component:n,field:i,form:a,onChange:r,render:o})}),[i,a,r,n,o]);return s.createElement(wn,{additionalClassName:t,hasError:(0,P.getIn)(a.errors,i.name),testId:l},d)}),(function(e,t){var n=e.form,a=e.field,s=(0,i.__rest)(e,["form","field"]),r=t.form,o=t.field,l=(0,i.__rest)(t,["form","field"]);return rt()(s,l)&&rt()(n,r)&&rt()(a,o)}));const On=(0,s.memo)((function(e){var t=e.additionalClassName,n=e.className,a=e.component,r=e.render,o=e.testId,l=e.onChange,d=(0,i.__rest)(e,["additionalClassName","className","component","render","testId","onChange"]),c=(0,s.useCallback)((function(e){return s.createElement(Mn,(0,i.__assign)({},e,{additionalClassName:t,className:n,component:a,onChange:l,render:r,testId:o}))}),[t,n,a,r,o,l]);return s.createElement(P.Field,(0,i.__assign)({},d,{render:c}))}));const Ln=(0,s.memo)((function(e){var t=e.name,n=e.testId,i=e.errorId,a=(0,s.useCallback)((function(e){return s.createElement("ul",{className:"form-field-errors","data-test":n},s.createElement("li",{className:"form-field-error"},s.createElement("label",{"aria-live":"polite",className:"form-inlineMessage",htmlFor:t,id:i,role:"alert"},e)))}),[i,t,n]);return s.createElement(vn.Ay.Consumer,null,(function(e){return e.isSubmitted&&s.createElement(P.ErrorMessage,{name:t,render:a})}))}));const Fn=(0,s.memo)((function(e){var t=e.additionalClassName,n=e.labelContent,i=e.label,r=e.onChange,o=e.footer,l=e.input,d=e.name,c=e.id,u=(0,s.useCallback)((function(e){return s.createElement(s.Fragment,null,Boolean(i)&&("function"==typeof i?i(d):i),Boolean(n&&!i)&&s.createElement(sn,{htmlFor:d,id:"".concat(null!=c?c:d,"-label")},n),l(e),s.createElement(Ln,{errorId:"".concat(null!=c?c:d,"-field-error-message"),name:d,testId:"".concat((0,a.kebabCase)(d),"-field-error-message")}),o)}),[i,n,c,l,d,o]);return s.createElement(On,{additionalClassName:t,name:d,onChange:r,render:u})}));var Pn;!function(e){e.TELEPHONE="tel",e.DROPDOWM="dropdown",e.NUMBER="number",e.PASSWORD="password",e.CHECKBOX="checkbox",e.MULTILINE="multiline",e.DATE="date",e.RADIO="radio",e.TEXT="text"}(Pn||(Pn={}));const xn=Pn;var Un=n(54351),Tn=n.n(Un),Rn=n(99662);const zn=(0,bt.A)((function(){return s.createElement("svg",{height:"24",viewBox:"0 0 24 24",width:"24",xmlns:"http://www.w3.org/2000/svg"},s.createElement("path",{d:"M16.59 8.59L12 13.17 7.41 8.59 6 10l6 6 6-6z"}))}));const Bn=(0,s.forwardRef)((function(e,t){var n=e.additionalClassName,a=e.label,r=e.id,o=(0,i.__rest)(e,["additionalClassName","label","id"]);return s.createElement(s.Fragment,null,s.createElement(an,(0,i.__assign)({},o,{className:$()("form-checkbox","optimizedCheckout-form-checkbox",n),id:r,ref:t,type:"checkbox"})),s.createElement(sn,{htmlFor:r},a))}));const Dn=(0,s.forwardRef)((function(e,t){var n=e.additionalClassName,a=e.testId,r=e.className,o=(0,i.__rest)(e,["additionalClassName","testId","className"]);return s.createElement("textarea",(0,i.__assign)({},o,{className:r||$()("form-input","optimizedCheckout-form-input",n),"data-test":a,ref:t}))}));const Vn=(0,s.forwardRef)((function(e,t){var n=e.additionalClassName,a=e.appearFocused,r=e.type,o=void 0===r?"text":r,l=(0,i.__rest)(e,["additionalClassName","appearFocused","type"]);return s.createElement(an,(0,i.__assign)({},l,{className:$()("form-input","optimizedCheckout-form-input",{"form-input--focus":a},{"optimizedCheckout-form-input--focus":a},n),ref:t,type:o}))}));const Hn=(0,s.memo)((0,Rn.A)((function(e){var t=e.fieldType,n=e.id,r=e.name,o=e.onChange,l=void 0===o?a.noop:o,d=e.options,c=e.placeholder,u=e.value,m=e.isFloatingLabelEnabled,p=e.date,h=e.inputDateFormat,g=(0,i.__rest)(e,["fieldType","id","name","onChange","options","placeholder","value","isFloatingLabelEnabled","date","inputDateFormat"]),f=h||(null==p?void 0:p.inputFormat)||"",v=(0,s.useCallback)((function(e,t){return l((0,i.__assign)((0,i.__assign)({},t),{target:{name:r,value:e}}))}),[l,r]);switch(t){case xn.DROPDOWM:return s.createElement(s.Fragment,null,s.createElement("div",{className:$()({"dropdown-chevron":!m},{"floating-select-chevron":m})},s.createElement(zn,null)),s.createElement("select",(0,i.__assign)({},g,{className:$()({"floating-select":m},"form-select optimizedCheckout-form-select"),"data-test":"".concat(n,"-select"),id:n,name:r,onChange:l,value:null!=u?u:""}),!!c&&s.createElement("option",{value:""},c),d&&d.map((function(e){var t=e.label,n=e.value;return s.createElement("option",{key:n,value:n},t)}))));case xn.RADIO:return d&&d.length?s.createElement(s.Fragment,null,d.map((function(e){var t=e.label,a=e.value;return s.createElement(rn,(0,i.__assign)({},g,{checked:a===u,id:"".concat(n,"-").concat(a),key:a,label:t,name:r,onChange:l,testId:"".concat(n,"-").concat(a,"-radio"),value:a}))}))):null;case xn.CHECKBOX:return d&&d.length?s.createElement(s.Fragment,null,d.map((function(e){var t=e.label,a=e.value;return s.createElement(Bn,(0,i.__assign)({},g,{checked:!!Array.isArray(u)&&u.includes(a),id:"".concat(n,"-").concat(a),key:a,label:t,name:r,onChange:l,testId:"".concat(n,"-").concat(a,"-checkbox"),value:a}))}))):null;case xn.DATE:return s.createElement(Tn(),(0,i.__assign)({},g,{autoComplete:"off",calendarClassName:"optimizedCheckout-contentPrimary",className:"form-input optimizedCheckout-form-input",dateFormat:f,maxDate:g.max?new Date("".concat(g.max,"T00:00:00Z")):void 0,minDate:g.min?new Date("".concat(g.min,"T00:00:00Z")):void 0,name:r,onChange:v,placeholderText:f.toUpperCase(),popperClassName:"optimizedCheckout-contentPrimary",selected:(0,a.isDate)(u)?u:void 0}));case xn.MULTILINE:return s.createElement(Dn,(0,i.__assign)({},g,{id:n,name:r,onChange:l,testId:"".concat(n,"-text"),type:t,value:u}));default:return s.createElement(Vn,(0,i.__assign)({},g,{id:n,name:r,onChange:l,placeholder:c,testId:"".concat(n,"-").concat(t===xn.PASSWORD?"password":"text"),type:t,value:u}))}})));const Wn=(0,s.memo)((function(e){var t=e.testId,n=e.onSelectedAll,i=e.onSelectedNone,a=(0,s.useCallback)((function(e){e.preventDefault(),n()}),[n]),r=(0,s.useCallback)((function(e){e.preventDefault(),i()}),[i]);return s.createElement("ul",{className:"multiCheckbox--controls"},s.createElement("li",{className:"multiCheckbox--control"},s.createElement(l.A,{id:"address.select"})),s.createElement("li",{className:"multiCheckbox--control"},s.createElement("a",{"data-test":"".concat(t||"","Checkbox-all-button"),href:"#",onClick:a},s.createElement(l.A,{id:"address.select_all"}))),s.createElement("li",{className:"multiCheckbox--control"},s.createElement("a",{"data-test":"".concat(t||"","Checkbox-none-button"),href:"#",onClick:r},s.createElement(l.A,{id:"address.select_none"}))))}));var Kn=function(e){var t=e.form,n=t.values,i=t.errors,r=e.id,o=e.label,l=e.name,d=e.onChange,c=void 0===d?a.noop:d,u=e.options,m=e.push,p=e.remove,h=(0,s.useCallback)((function(){var e=(0,P.getIn)(n,l)||[];(0,a.difference)(u.map((function(e){return e.value})),e).forEach((function(e){return m(e)})),c((0,P.getIn)(n,l))}),[l,c,u,m,n]),g=(0,s.useCallback)((function(){((0,P.getIn)(n,l)||[]).forEach((function(){return p(0)})),c((0,P.getIn)(n,l))}),[l,c,p,n]),f=(0,s.useCallback)((function(e){var t=(0,P.getIn)(n,l)||[],i=e.target,a=i.value;i.checked?m(a):p(t.indexOf(a)),c((0,P.getIn)(n,l))}),[l,c,m,p,n]);return s.createElement(wn,{hasError:(0,P.getIn)(i,l)&&(0,P.getIn)(i,l).length},o,u.length>1&&s.createElement(Wn,{onSelectedAll:h,onSelectedNone:g,testId:r}),s.createElement(Hn,{fieldType:xn.CHECKBOX,id:r,name:l,onChange:f,options:u,value:(0,P.getIn)(n,l)||[]}),s.createElement(Ln,{errorId:"".concat(null!=r?r:l,"-field-error-message"),name:l,testId:"".concat((0,a.kebabCase)(l),"-field-error-message")}))};const Gn=(0,s.memo)((function(e){var t=e.id,n=e.label,r=e.name,o=e.onChange,l=e.options,d=(0,s.useCallback)((function(e){return s.createElement(Kn,(0,i.__assign)({id:t,label:n,name:r,onChange:o,options:l},(0,a.pick)(e,["form","pop","push","remove"])))}),[t,n,r,o,l]);return s.createElement(P.FieldArray,{name:r,render:d})}));const qn=(0,s.memo)((function(e){var t=e.field,n=t.fieldType,r=t.type,o=t.secret,d=t.name,c=t.label,u=t.required,m=t.options,p=t.max,h=t.min,g=t.maxLength,f=t.inputDateFormat,v=e.parentFieldName,S=e.onChange,A=e.placeholder,E=e.inputId,_=e.autocomplete,C=e.label,y=e.extraClass,b=E||d,I=v?"".concat(v,".").concat(d):d,N=(0,s.useMemo)((function(){return s.createElement(sn,{htmlFor:b,id:"".concat(b,"-label")},C||c,!u&&s.createElement(s.Fragment,null," ",s.createElement("small",{className:"optimizedCheckout-contentSecondary"},s.createElement(l.A,{id:"common.optional_text"}))))}),[b,c,u,C]),w=(0,s.useMemo)((function(){return"text"===n?"integer"===r?xn.NUMBER:(0,a.includes)(d,"phone")||(0,a.includes)(d,"tel")?xn.TELEPHONE:o?xn.PASSWORD:xn.TEXT:n}),[n,r,d,o]),k=(0,s.useCallback)((function(e){var t=e.field;return s.createElement(Hn,(0,i.__assign)({},t,{"aria-labelledby":"".concat(b,"-label ").concat(b,"-field-error-message"),autoComplete:_,fieldType:w,id:b,inputDateFormat:f,max:p,maxLength:g||void 0,min:h,options:m&&m.items,placeholder:A||m&&m.helperLabel,rows:m&&m.rows}))}),[f,b,_,w,p,g,h,m,A]);return s.createElement("div",{className:"dynamic-form-field ".concat(y||"")},n===xn.CHECKBOX?s.createElement(Gn,{id:b,label:N,name:I,onChange:S,options:m&&m.items||[]}):s.createElement(Fn,{id:b,input:k,label:N,name:I,onChange:S}))}));const Jn=(0,s.memo)((function(e){var t=e.address,n=e.formFields,a=e.isLoading,r=e.onFieldChange,o=e.countries,d=e.paypalFastlaneShippingComponentRef,c=(0,In.A)(t,o),u=n.filter((function(e){return e.custom})),m=u.length>0;return s.createElement(nn,{hideContentWhenLoading:!0,isLoading:a},s.createElement("div",{className:"stepHeader",style:{padding:0}},s.createElement("div",{className:"stepHeader-body subheader"},s.createElement("div",{className:"vcard checkout-address--static"},(c.firstName||c.lastName)&&s.createElement("p",{className:"fn address-entry"},s.createElement("span",{className:"first-name"},"".concat(c.firstName," ")),s.createElement("span",{className:"family-name"},c.lastName)),(c.phone||c.company)&&s.createElement("p",{className:"address-entry"},s.createElement("span",{className:"company-name"},"".concat(c.company," ")),s.createElement("span",{className:"tel"},c.phone)),s.createElement("div",{className:"adr"},s.createElement("p",{className:"street-address address-entry"},s.createElement("span",{className:"address-line-1"},"".concat(c.address1," ")),c.address2&&s.createElement("span",{className:"address-line-2"}," / ".concat(c.address2))),s.createElement("p",{className:"address-entry"},c.city&&s.createElement("span",{className:"locality"},"".concat(c.city,", ")),c.localizedProvince&&s.createElement("span",{className:"region"},"".concat(c.localizedProvince,", ")),c.postalCode&&s.createElement("span",{className:"postal-code"},"".concat(c.postalCode," / ")),c.localizedCountry&&s.createElement("span",{className:"country-name"},"".concat(c.localizedCountry," "))))),s.createElement(Fe.A,null)),s.createElement("div",{className:"stepHeader-actions subheader"},s.createElement(Rt.Ay,{onClick:function(){return(0,i.__awaiter)(void 0,void 0,void 0,(function(){var t;return(0,i.__generator)(this,(function(n){switch(n.label){case 0:return"function"!=typeof d.current.showAddressSelector?[3,2]:[4,d.current.showAddressSelector()];case 1:(t=n.sent())&&e.onAddressSelect((0,i.__assign)((0,i.__assign)({},t),m?c.customFields:{})),n.label=2;case 2:return[2]}}))}))},size:Rt.Mp.Tiny,testId:"step-edit-button",variant:Rt.Ak.Secondary},s.createElement(l.A,{id:"common.edit_action"})))),m&&s.createElement(Nn,{id:"customFieldset"},u.map((function(e){return s.createElement(qn,{field:e,key:"".concat(e.id,"-").concat(e.name),onChange:(t=e.name,function(e){return r(t,e)}),parentFieldName:"shippingAddress.customFields"});var t}))))}));var Qn="shippingAddress",jn=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.setFieldValue=function(e,n){var i=t.props,a=i.formik.setFieldValue,s=i.formFields.filter((function(e){return e.custom})).map((function(e){return e.name})).includes(e)?"customFields.".concat(e):e;a("".concat(Qn,".").concat(s),n)},t.handleChange=function(e,n){(0,t.props.onFieldChange)(e,n)},t.handleAutocompleteToggle=function(e){var n=e.isOpen,i=e.inputValue,a=t.props.onFieldChange;n||a("address1",i)},t}return(0,i.__extends)(t,e),t.prototype.render=function(){var e=this.props,t=e.addresses,n=e.address,i=e.onAddressSelect,r=e.onUseNewAddress,o=e.shouldShowSaveAddress,l=e.countries,d=e.countriesWithAutocomplete,c=e.formFields,u=e.isLoading,m=e.googleMapsApiKey,h=e.isFloatingLabelEnabled,g=e.formik.values.shippingAddress,f=e.validateAddressFields,v=t&&t.length>0,S=function(e,t,n,i){return!(!e||!(0,F.A)(e,n,i))&&(0,a.some)(t,(function(t){return p(t,e)}))}(n,t,c,f);return s.createElement(H.A,{id:"checkoutShippingAddress"},v&&s.createElement(H.A,{id:"shippingAddresses"},s.createElement(R.A,{isLoading:u},s.createElement(We,{addresses:t,onSelectAddress:i,onUseNewAddress:r,selectedAddress:S?n:void 0,type:Te.A.Shipping}))),!S&&s.createElement(R.A,{isLoading:u,unmountContentWhenLoading:!0},s.createElement(Se,{countries:l,countriesWithAutocomplete:d,countryCode:g&&g.countryCode,fieldName:Qn,formFields:c,googleMapsApiKey:m,isFloatingLabelEnabled:h,onAutocompleteToggle:this.handleAutocompleteToggle,onChange:this.handleChange,setFieldValue:this.setFieldValue,shouldShowSaveAddress:o})))},t}(s.Component);const Zn=ot(jn);var Yn=function(e){var t=e.methodId,n=e.formFields,a=e.countries,r=e.onAddressSelect,o=e.onFieldChange,l=e.onUnhandledError,d=e.initialize,c=e.deinitialize,u=e.shippingAddress,m=e.addresses,p=e.handleFieldChange,h=e.isLoading,g=(0,s.useState)(!0),f=g[0],v=g[1],S=(0,s.useRef)({}),A=function(e){var t;return(t={})[e]={onPayPalFastlaneAddressChange:function(e){S.current.showAddressSelector=e}},t},E=(0,bn.A)(t)?A("paypalcommercefastlane"):A("braintreefastlane");(0,s.useEffect)((function(){return(0,i.__awaiter)(void 0,void 0,void 0,(function(){var e;return(0,i.__generator)(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,d((0,i.__assign)({methodId:t},E))];case 1:return n.sent(),[3,3];case 2:return e=n.sent(),"function"==typeof l&&e instanceof Error&&l(e),[3,3];case 3:return v(!1),[2]}}))})),function(){(0,i.__awaiter)(void 0,void 0,void 0,(function(){var e;return(0,i.__generator)(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,c({methodId:t})];case 1:return n.sent(),[3,3];case 2:return e=n.sent(),"function"==typeof l&&e instanceof Error&&l(e),[3,3];case 3:return[2]}}))}))}}),[]);var _=(0,Le.A)().shouldShowPayPalFastlaneShippingForm;return s.createElement(R.A,{hideContentWhenLoading:!0,isLoading:f||h},t&&(0,_n.A)(t)&&u&&_?s.createElement(Jn,{address:u,countries:a,deinitialize:c,formFields:n,initialize:d,isLoading:f,methodId:t,onAddressSelect:r,onFieldChange:o,onUnhandledError:l,paypalFastlaneShippingComponentRef:S}):s.createElement(Zn,{address:u,addresses:m,consignments:e.consignments,countries:a,countriesWithAutocomplete:e.countriesWithAutocomplete,formFields:n,googleMapsApiKey:e.googleMapsApiKey,isFloatingLabelEnabled:e.isFloatingLabelEnabled,isLoading:f,onAddressSelect:r,onFieldChange:p,onUseNewAddress:e.onUseNewAddress,shouldShowSaveAddress:e.shouldShowSaveAddress,validateAddressFields:e.validateAddressFields}))};const Xn=(0,s.memo)((function(e){var t=e.methodId,n=e.formFields,a=e.countries,r=e.countriesWithAutocomplete,o=e.consignments,l=e.googleMapsApiKey,d=e.onAddressSelect,c=e.onFieldChange,u=e.onUseNewAddress,m=e.isLoading,p=e.shippingAddress,h=e.hasRequestedShippingOptions,g=e.addresses,f=e.shouldShowSaveAddress,v=e.isFloatingLabelEnabled,S=e.validateAddressFields,A=(0,s.useContext)(vn.Ay).setSubmitted,E=function(e,t){h&&A(!0),c(e,t)};return t&&(0,_n.A)(t)&&p?s.createElement(Yn,(0,i.__assign)({},e,{handleFieldChange:E,methodId:t,shippingAddress:p})):"amazonpay"===t&&p?s.createElement(yn,(0,i.__assign)({},e,{shippingAddress:p})):s.createElement(Zn,{address:p,addresses:g,consignments:o,countries:a,countriesWithAutocomplete:r,formFields:n,googleMapsApiKey:l,isFloatingLabelEnabled:v,isLoading:m,onAddressSelect:d,onFieldChange:E,onUseNewAddress:u,shouldShowSaveAddress:f,validateAddressFields:S})}));var $n=["address1","postalCode","countryCode","city","stateOrProvince","stateOrProvinceCode"];var ei=function(e){function t(t){var n,s=e.call(this,t)||this;s.state={isResettingAddress:!1,isUpdatingShippingData:!1,hasRequestedShippingOptions:!1},s.handleFieldChange=function(e){return(0,i.__awaiter)(s,void 0,void 0,(function(){var t,n,a;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:return t=this.props.setFieldValue,"countryCode"===e&&(t("shippingAddress.stateOrProvince",""),t("shippingAddress.stateOrProvinceCode","")),[4,new Promise((function(e){return setTimeout(e)}))];case 1:return i.sent(),n=$n.includes(e),a=this.state.hasRequestedShippingOptions,this.props.isValid?(this.updateAddressWithFormData(n||!a),[2]):[2]}}))}))},s.handleAddressSelect=function(e){return(0,i.__awaiter)(s,void 0,void 0,(function(){var t,n,s,r,o,l,d;return(0,i.__generator)(this,(function(c){switch(c.label){case 0:t=this.props,n=t.updateAddress,s=t.onUnhandledError,r=void 0===s?a.noop:s,o=t.values,l=t.setValues,this.setState({isResettingAddress:!0}),c.label=1;case 1:return c.trys.push([1,3,4,5]),[4,n(e)];case 2:return c.sent(),l((0,i.__assign)((0,i.__assign)({},o),{shippingAddress:(0,Sn.A)(this.getFields(e.countryCode),e)})),[3,5];case 3:return d=c.sent(),r(d),[3,5];case 4:return this.setState({isResettingAddress:!1}),[7];case 5:return[2]}}))}))},s.onUseNewAddress=function(){return(0,i.__awaiter)(s,void 0,void 0,(function(){var e,t,n,s,r,o,l,d;return(0,i.__generator)(this,(function(c){switch(c.label){case 0:e=this.props,t=e.deleteConsignments,n=e.onUnhandledError,s=void 0===n?a.noop:n,r=e.setValues,o=e.values,this.setState({isResettingAddress:!0}),c.label=1;case 1:return c.trys.push([1,3,4,5]),[4,t()];case 2:return l=c.sent(),r((0,i.__assign)((0,i.__assign)({},o),{shippingAddress:(0,Sn.A)(this.getFields(l&&l.countryCode),l)})),[3,5];case 3:return d=c.sent(),s(d),[3,5];case 4:return this.setState({isResettingAddress:!1}),[7];case 5:return[2]}}))}))};var r=s.props.updateAddress;return s.debouncedUpdateAddress=(0,a.debounce)((function(e,t){return(0,i.__awaiter)(s,void 0,void 0,(function(){return(0,i.__generator)(this,(function(n){switch(n.label){case 0:return n.trys.push([0,,2,3]),[4,r(e,{params:{include:{"consignments.availableShippingOptions":t}}})];case 1:return n.sent(),t&&this.setState({hasRequestedShippingOptions:!0}),[3,3];case 2:return this.setState({isUpdatingShippingData:!1}),[7];case 3:return[2]}}))}))}),null!==(n=t.shippingAutosaveDelay)&&void 0!==n?n:1700),s}return(0,i.__extends)(t,e),t.prototype.render=function(){var e=this.props,t=e.addresses,n=e.cartHasChanged,i=e.isInitialValueLoaded,a=e.isLoading,r=e.onUnhandledError,o=e.methodId,l=e.shouldShowSaveAddress,d=e.countries,c=e.countriesWithAutocomplete,u=e.googleMapsApiKey,m=e.shippingAddress,p=e.consignments,h=e.shouldShowOrderComments,g=e.initialize,f=e.deinitialize,v=e.values.shippingAddress,S=e.isShippingStepPending,A=e.isFloatingLabelEnabled,E=e.validateAddressFields,_=this.state,C=_.isResettingAddress,y=_.isUpdatingShippingData,b=_.hasRequestedShippingOptions;return s.createElement(T.A,{autoComplete:"on"},s.createElement(H.A,null,s.createElement(Xn,{addresses:t,consignments:p,countries:d,countriesWithAutocomplete:c,deinitialize:f,formFields:this.getFields(v&&v.countryCode),googleMapsApiKey:u,hasRequestedShippingOptions:b,initialize:g,isFloatingLabelEnabled:A,isLoading:C,isShippingStepPending:S,methodId:o,onAddressSelect:this.handleAddressSelect,onFieldChange:this.handleFieldChange,onUnhandledError:r,onUseNewAddress:this.onUseNewAddress,shippingAddress:m,shouldShowSaveAddress:l,validateAddressFields:E}),!1),s.createElement(_t,{cartHasChanged:n,isInitialValueLoaded:i,isLoading:a||y,isMultiShippingMode:!1,shouldDisableSubmit:!1,shouldShowOrderComments:h,shouldShowShippingOptions:!1}))},t.prototype.updateAddressWithFormData=function(e){var t=this.props,n=t.shippingAddress,i=t.values.shippingAddress,s=i&&m(i);Array.isArray(null==n?void 0:n.customFields)&&(e=!(0,a.isEqual)(null==n?void 0:n.customFields,null==s?void 0:s.customFields)||e),s&&!p(s,n)&&(this.setState({isUpdatingShippingData:!0}),this.debouncedUpdateAddress(s,e))},t.prototype.getFields=function(e){return(0,this.props.getFields)(e)},t.contextType=vn.Ay,t}(s.PureComponent);const ti=(0,L.A)(ye({handleSubmit:function(e,t){(0,t.props.onSubmit)(e)},mapPropsToValues:function(e){var t=e.getFields,n=e.shippingAddress;return{billingSameAsShipping:e.isBillingSameAsShipping,orderComment:e.customerMessage,shippingAddress:(0,Sn.A)(t(n&&n.countryCode),n)}},isInitialValid:function(e){var t=e.shippingAddress,n=e.getFields,i=e.language;return!!t&&(0,Ae.A)({language:i,formFields:n(t.countryCode)}).isValidSync(t)},validationSchema:function(e){var t=e.language,n=e.getFields,i=e.methodId,a=e.validateGoogleMapAutoCompleteMaxLength,s=e.validateAddressFields;return function(e){var t=[E.A.BraintreeAcceleratedCheckout,E.A.PayPalCommerceAcceleratedCheckout];return Boolean(e&&!t.includes(e))}(i)?(0,x.Ik)({shippingAddress:(0,x.RZ)((function(e){return(0,An.A)({translate:(0,Ae.X)(t),formFields:n(e&&e.countryCode)})}))}):(0,x.Ik)({shippingAddress:(0,x.RZ)((function(e){return(0,Ae.A)({language:t,formFields:n(e&&e.countryCode),validateGoogleMapAutoCompleteMaxLength:a,validateAddressFields:s})}))})},enableReinitialize:!1})(ei));const ni=(0,L.A)((function(e){var t=e.addresses,n=e.assignItem,i=e.cart,a=e.cartHasChanged,r=e.createCustomerAddress,o=e.consignments,l=e.countries,d=e.countriesWithAutocomplete,c=e.onCreateAccount,u=e.customerMessage,m=e.deinitialize,p=e.deleteConsignments,h=e.getFields,g=e.googleMapsApiKey,f=e.initialize,v=e.isBillingSameAsShipping,S=e.isGuest,A=e.isLoading,E=e.isMultiShippingMode,_=e.methodId,C=e.onMultiShippingSubmit,y=e.onSignIn,b=e.onSingleShippingSubmit,I=e.onUnhandledError,N=e.onUseNewAddress,w=e.shippingAddress,k=e.shouldShowOrderComments,M=e.shouldShowSaveAddress,O=e.signOut,L=e.updateAddress,F=e.isShippingStepPending,P=e.isFloatingLabelEnabled,x=e.isInitialValueLoaded,U=e.isNewMultiShippingUIEnabled,T=e.validateGoogleMapAutoCompleteMaxLength,R=e.validateAddressFields;return E?S?s.createElement(fn,{onCreateAccount:c,onSignIn:y}):U?s.createElement(hn,{cartHasChanged:a,countriesWithAutocomplete:d,customerMessage:u,defaultCountryCode:null==w?void 0:w.countryCode,isLoading:A,onSubmit:C,onUnhandledError:I}):s.createElement(yt,{addresses:t,assignItem:n,cart:i,cartHasChanged:a,consignments:o,countries:l,countriesWithAutocomplete:d,createCustomerAddress:r,customerMessage:u,defaultCountryCode:null==w?void 0:w.countryCode,getFields:h,googleMapsApiKey:g,isFloatingLabelEnabled:P,isInitialValueLoaded:x,isLoading:A,onSubmit:C,onUnhandledError:I,onUseNewAddress:N,shouldShowOrderComments:k,validateAddressFields:R}):s.createElement(ti,{addresses:t,cartHasChanged:a,consignments:o,countries:l,countriesWithAutocomplete:d,customerMessage:u,deinitialize:m,deleteConsignments:p,getFields:h,googleMapsApiKey:g,initialize:f,isBillingSameAsShipping:v,isFloatingLabelEnabled:P,isInitialValueLoaded:x,isLoading:A,isMultiShippingMode:E,isShippingStepPending:F,methodId:_,onSubmit:b,onUnhandledError:I,shippingAddress:w,shouldShowOrderComments:k,shouldShowSaveAddress:M,signOut:O,updateAddress:L,validateAddressFields:R,validateGoogleMapAutoCompleteMaxLength:T})}));const ii=(0,s.memo)((function(e){var t=e.isMultiShippingMode,n=e.isGuest,i=e.onMultiShippingChange,a=e.shouldShowMultiShipping,r=e.isNewMultiShippingUIEnabled,o=e.cartHasPromotionalItems,d=(0,s.useState)(!1),u=d[0],m=d[1],p=(0,s.useState)(!1),h=p[0],g=p[1],f=a&&r&&t,v=a&&r&&!t&&o;return s.createElement(s.Fragment,null,s.createElement(Ge.Y,{region:"shipping.shippingAddressForm.before"}),s.createElement("div",{className:$()("form-legend-container",{"shipping-header":r})},s.createElement(Je.A,{testId:"shipping-address-heading"},s.createElement(l.A,{id:t?n?"shipping.multishipping_address_heading_guest":"shipping.multishipping_address_heading":"shipping.shipping_address_heading"})),f&&s.createElement(s.Fragment,null,s.createElement(c.A,{action:function(){m(!1),i()},actionButtonLabel:s.createElement(l.A,{id:"common.proceed_action"}),headerId:"shipping.ship_to_single_action",isModalOpen:u,messageId:"shipping.ship_to_single_message",onRequestClose:function(){return m(!1)}}),s.createElement("a",{"data-test":"shipping-mode-toggle",href:"#",onClick:(0,Oe.A)((function(){return m(!0)}))},s.createElement(l.A,{id:"shipping.ship_to_single"}))),v&&s.createElement(s.Fragment,null,s.createElement(c.A,{action:function(){return g(!1)},actionButtonLabel:s.createElement(l.A,{id:"common.back_action"}),headerId:"shipping.multishipping_unavailable_action",isModalOpen:h,messageId:"shipping.multishipping_unavailable_message",onRequestClose:function(){return g(!1)}}),s.createElement("a",{"data-test":"shipping-mode-toggle",href:"#",onClick:(0,Oe.A)((function(){return g(!0)}))},s.createElement(l.A,{id:"shipping.ship_to_multi"}))),!f&&!v&&a&&s.createElement("a",{"data-test":"shipping-mode-toggle",href:"#",onClick:(0,Oe.A)(i)},s.createElement(l.A,{id:t?"shipping.ship_to_single":"shipping.ship_to_multi"}))))}));var ai=n(59713);const si=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,i.__extends)(t,e),t.prototype.componentDidMount=function(){return(0,i.__awaiter)(this,void 0,void 0,(function(){var e,t,n,s,r,o;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:e=this.props,t=e.initialize,n=e.methodId,s=e.onUnhandledError,r=void 0===s?a.noop:s,i.label=1;case 1:return i.trys.push([1,3,,4]),[4,t({methodId:n})];case 2:return i.sent(),[3,4];case 3:return o=i.sent(),r(o),[3,4];case 4:return[2]}}))}))},t.prototype.componentWillUnmount=function(){return(0,i.__awaiter)(this,void 0,void 0,(function(){var e,t,n,s,r,o;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:e=this.props,t=e.deinitialize,n=e.methodId,s=e.onUnhandledError,r=void 0===s?a.noop:s,i.label=1;case 1:return i.trys.push([1,3,,4]),[4,t({methodId:n})];case 2:return i.sent(),[3,4];case 3:return o=i.sent(),r(o),[3,4];case 4:return[2]}}))}))},t.prototype.render=function(){return s.createElement(s.Fragment,null,s.createElement("div",{className:"stepHeader",style:{padding:0}},s.createElement("div",{id:"StripeUpeShipping",style:{width:"100%"}})),s.createElement("br",null))},t}(s.PureComponent);function ri(e,t){var n,i={MX:{"Ags.":"AGU","B.C.":"BCN","B.C.S.":"BCS","Camp.":"CAM","Coah.":"COA","Col.":"COL","Chis.":"CHP","Chih.":"CHH","Dgo.":"DUR","Gto.":"GUA","Gro.":"GRO","Hgo.":"HID","Jal.":"JAL","Méx.":"MEX",CDMX:"MEX","Mich.":"MIC","Mor.":"MOR","Nay.":"NAY","N.L.":"NLE","Oax.":"OAX","Pue.":"PUE","Qro.":"QUE","Q.R.":"ROO","S.L.P.":"SLP","Sin.":"SIN","Son.":"SON","Tab.":"TAB","Tamps.":"TAM","Tlax.":"TLA","Ver.":"VER","Yuc.":"YUC","Zac.":"ZAC"},AR:{"Ciudad Autónoma de Buenos Aires":"C","Buenos Aires":"B",Catamarca:"K",Chaco:"H",Chubut:"U",Córdoba:"X",Corrientes:"W","Entre Ríos":"E",Formosa:"P",Jujuy:"Y","La Pampa":"L","La Rioja":"F",Mendoza:"M",Misiones:"N",Neuquén:"Q",Salta:"A","San Juan":"J","San Luis":"D","Santa Fe":"S","Santiago del Estero":"G","Tierra del Fuego":"V",Tucumán:"W"},IN:{"Andhra Pradesh":"AP","Arunachal Pradesh":"AR",Assam:"AS",Bihar:"BR",Chhattisgarh:"CG",Goa:"GA",Gujarat:"GJ",Haryana:"HR","Himachal Pradesh":"HP","Jammu and Kashmir":"JK",Jharkhand:"JH",Karnataka:"KA",Kerala:"KL","Madhya Pradesh":"MP",Maharashtra:"MH",Manipur:"MN",Meghalaya:"ML",Mizoram:"MZ",Nagaland:"NL",Odisha:"OR",Punjab:"PB",Rajasthan:"RJ",Sikkim:"SK","Tamil Nadu":"TN",Tripura:"TR",Uttarakhand:"UK","Uttar Pradesh":"UP","West Bengal":"WB","Andaman and Nicobar Islands":"AN",Chandigarh:"CH","Dadra and Nagar Haveli and Daman and Diu":"DN",Lakshadweep:"LD",Delhi:"DL",Puducherry:"PY",Telangana:"TS"},ID:{Bali:"BA",Banten:"BT",Bengkulu:"BE",Aceh:"DA","DKI Jakarta":"JK","Sumatera Utara":"SU","Sumatera Barat":"SB",Riau:"SI",Jambi:"JA","Sumatera Selatan":"SS",Lampung:"LA","Jawa Barat":"JB","Jawa Timur":"JT","Daerah Istimewa Yogyakarta":"DY","Kalimantan Barat":"KB","Kalimantan Tengah":"KT","Kalimantan Timur":"KI","Kalimantan Selatan":"KS","Nusa Tenggara Barat":"NB","Nusa Tenggara Timur":"NT","Sulawesi Selatan":"SN","Sulawesi Tengah":"ST","Sulawesi Utara":"SA","Sulawesi Tenggara":"SG",Maluku:"MA","Maluku Utara":"MU",Gorontalo:"GO"},MY:{Johor:"JHR",Kedah:"KDH",Kelantan:"KTN",Melaka:"MLK","Negeri Sembilan":"NSN",Pahang:"PHG","Pulau Pinang":"PNG",Perak:"PRK",Perlis:"PLS",Selangor:"SGR",Terengganu:"TRG",Sabah:"SBH",Sarawak:"SRW","Kuala Lumpur":"KUL",Labuan:"LBN",Putrajaya:"PJY"},IE:{Carlow:"CW",Cavan:"CN",Clare:"CE",Donegal:"DL",Dublin:"D",Galway:"G",Kildare:"KE",Kilkenny:"KK",Laois:"LS",Leitrim:"LM",Longford:"LD",Louth:"LH",Mayo:"MO",Meath:"MH",Monaghan:"MN",Offaly:"OY",Roscommon:"RN",Sligo:"SO",Tipperary:"TA",Waterford:"WD",Westmeath:"WH",Wexford:"WX",Wicklow:"WW"},ES:{C:"ACOR",VI:"ALAV",AB:"ALBA",A:"ALIC",AL:"ALME",O:"ASTU",AV:"AVIL",BA:"BADA",PM:"BALE",B:"BARC",BU:"BURG",CC:"CACE",CA:"CADI",S:"CANT",CS:"CAST",CE:"CEUT",CR:"CIUD",CO:"CORD",CU:"CUEN",GI:"GIRO",GR:"GRAN",GU:"GUAD",SS:"GUIP",H:"HUEL",HU:"HUES",J:"JAEN",LO:"LAR",GC:"LAS",LE:"LEON",L:"LLEI",LU:"LUGO",M:"MADR",MA:"MALA",ML:"MELI",MU:"MURC",NA:"NAVA",OR:"OURE",P:"PALE",PO:"PONT",SA:"SALA",TF:"SANT",SG:"SEGO",SE:"SEVI",SO:"SORI",T:"TARR",TE:"TERU",TP:"TOLE",V:"VALE",VA:"VALL",BI:"VIZC",ZA:"ZAMO",Z:"ZARA"},JP:{Aichi:"23",Akita:"05",Aomori:"02",Chiba:"12",Ehime:"38",Fukui:"18",Fukuoka:"40",Fukushima:"07",Gifu:"21",Gunma:"10",Hiroshima:"34",Hokkaido:"01",Hyogo:"28",Ibaraki:"08",Ishikawa:"17",Iwate:"03",Kagawa:"37",Kagoshima:"46",Kanagawa:"14",Kochi:"39",Kumamoto:"43",Kyoto:"26",Mie:"24",Miyagi:"04",Miyazaki:"45",Nagano:"20",Nagasaki:"42",Nara:"29",Niigata:"15",Oita:"44",Okayama:"33",Okinawa:"47",Osaka:"27",Saga:"41",Saitama:"11",Shiga:"25",Shimane:"32",Shizuoka:"22",Tochigi:"09",Tokushima:"36",Tokyo:"13",Tottori:"31",Toyama:"16",Wakayama:"30",Yamagata:"06",Yamaguchi:"35",Yamanashi:"19"}};return i[e]?null!==(n=i[e][t])&&void 0!==n?n:function(e,t){return Object.keys(e).find((function(n){return e[n]===t}))||t}(i[e],t):t}const oi=(0,s.memo)((function(e){var t=e.countries,n=e.consignments,a=e.onAddressSelect,r=e.initialize,o=e.deinitialize,l=e.shouldDisableSubmit,d=e.onSubmit,c=e.step,u=e.isStripeLoading,m=e.isStripeAutoStep,p=e.isShippingMethodLoading,h=e.shippingAddress,g=(0,s.useState)(!0),f=g[0],v=g[1],S=(0,s.useState)(!0),A=S[0],E=S[1],_=(0,s.useState)({firstName:"",lastName:"",company:"",address1:"",address2:"",city:"",stateOrProvince:"",stateOrProvinceCode:"",shouldSaveAddress:!0,country:"",countryCode:"",postalCode:"",phone:"",customFields:[]}),C=_[0],y=_[1],b=(0,s.useCallback)((function(){u&&u()}),[u]);(0,s.useEffect)((function(){if(n[0]){var e=n[0].availableShippingOptions;e&&!Xe(e)&&b()}}),[n]),(0,s.useEffect)((function(){C.firstName&&(0,ke.A)(n)&&(!A&&!f&&!p)&&(u&&m)&&(u(),m(),d({billingSameAsShipping:!0,shippingAddress:C,orderComment:""}))}),[A,d,C,l,p,f,n]);var I,N=null==t?void 0:t.map((function(e){return{code:e.code,name:e.name}})),w=N?N.map((function(e){return e.code})).join(", "):"",k=(0,s.useCallback)((function(e){return(0,i.__awaiter)(void 0,void 0,void 0,(function(){var t,n,s,r,o,l,d,u,m,p,g,S,A,_,C,I,w;return(0,i.__generator)(this,(function(i){return t=e.complete,n=e.phoneFieldRequired,s=e.value,r=s.address,o=void 0===r?{country:"",state:"",line1:"",line2:"",city:"",postal_code:""}:r,l=s.name,d=void 0===l?"":l,u=s.firstName,m=void 0===u?"":u,p=s.lastName,g=void 0===p?"":p,S=s.phone,A=void 0===S?"":S,t?(function(e,t,n){void 0===e&&(e=!0);var i=c.isComplete,a=(null==h?void 0:h.firstName)&&e;return i||a||t&&!n}(null==e?void 0:e.isNewAddress,n,A)&&b(),_=null==d?void 0:d.split(" "),C=null==N?void 0:N.find((function(e){return e.code===o.country})).name,I=ri(o.country,o.state),w={firstName:m||_[0],lastName:g||_[1],company:"",address1:o.line1,address2:o.line2||"",city:o.city,stateOrProvince:I,stateOrProvinceCode:I,shouldSaveAddress:!0,country:C||o.country,countryCode:o.country,postalCode:o.postal_code,phone:A||"",customFields:[]},c.isComplete||E((function(e){return!e})),a(w),y(w),e.isNewAddress!==f&&v((function(e){return!e}))):b(),[2]}))}))}),[N,a]),M=(0,s.useCallback)((0,D.memoizeOne)((function(e){return function(t){return r((0,i.__assign)((0,i.__assign)({},e),t))}})),[]),O=function(e,t){var n=document.getElementById(e);if(n)return(0,ai.A)(n,t)},L=(0,s.useCallback)((function(){var e="stripe-card-component-field",t=O("".concat(e,"--input"),["color","background-color","border-color","box-shadow"]),n=O("".concat(e,"--label"),["color"]),i=O("".concat(e,"--error"),["color"]);return n&&t&&i?{labelText:n.color,fieldText:t.color,fieldPlaceholderText:t.color,fieldErrorText:i.color,fieldBackground:t["background-color"],fieldInnerShadow:t["box-shadow"],fieldBorder:t["border-color"]}:void 0}),[]),F={stripeupe:{container:"StripeUpeShipping",onChangeShipping:k,availableCountries:w,getStyles:L,getStripeState:ri,gatewayId:"stripeupe",methodId:"card"}};return s.createElement(s.Fragment,null,s.createElement(si,{deinitialize:o,initialize:M(F),methodId:"stripeupe"}),(I="stripe-card-component-field",s.createElement("div",{className:"optimizedCheckout-form-input",id:"".concat(I,"--input"),placeholder:"1111"},s.createElement("div",{className:"form-field--error"},s.createElement("div",{className:"optimizedCheckout-form-label",id:"".concat(I,"--error")})),s.createElement("div",{className:"optimizedCheckout-form-label",id:"".concat(I,"--label")}))))}));var li=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={isUpdatingShippingData:!1},t.shouldDisableSubmit=function(){var e=t.props,n=e.isLoading,i=e.consignments,a=e.isValid,s=t.state.isUpdatingShippingData;return!!a&&(n||s||!(0,ke.A)(i))},t.handleAddressSelect=function(e){return(0,i.__awaiter)(t,void 0,void 0,(function(){var t,n,s,r,o,l,d;return(0,i.__generator)(this,(function(c){switch(c.label){case 0:t=this.props,n=t.updateAddress,s=t.onUnhandledError,r=void 0===s?a.noop:s,o=t.values,l=t.setValues,c.label=1;case 1:return c.trys.push([1,3,,4]),[4,n(e)];case 2:return c.sent(),l((0,i.__assign)((0,i.__assign)({},o),{shippingAddress:(0,Sn.A)(this.getFields(e.countryCode),e)})),[3,4];case 3:return d=c.sent(),r(d),[3,4];case 4:return[2]}}))}))},t}return(0,i.__extends)(t,e),t.prototype.render=function(){var e=this.props,t=e.cartHasChanged,n=e.isInitialValueLoaded,i=e.isLoading,a=e.countries,r=e.isStripeLoading,o=e.shippingAddress,l=e.consignments,d=e.shouldShowOrderComments,c=e.initialize,u=e.isValid,m=e.deinitialize,p=e.onSubmit,h=e.isStripeAutoStep,g=e.step,f=e.isShippingMethodLoading,v=this.state.isUpdatingShippingData;return s.createElement(T.A,{autoComplete:"on"},s.createElement(H.A,null,s.createElement(oi,{consignments:l,countries:a,deinitialize:m,initialize:c,isShippingMethodLoading:f,isStripeAutoStep:h,isStripeLoading:r,onAddressSelect:this.handleAddressSelect,onSubmit:p,shippingAddress:o,shouldDisableSubmit:this.shouldDisableSubmit(),step:g}),s.createElement("div",{className:"form-body"},s.createElement(En,null))),s.createElement(_t,{cartHasChanged:t,isInitialValueLoaded:n,isLoading:i||v,isMultiShippingMode:!1,shouldDisableSubmit:this.shouldDisableSubmit(),shouldShowOrderComments:d,shouldShowShippingOptions:u}))},t.prototype.getFields=function(e){return(0,this.props.getFields)(e)},t.contextType=vn.Ay,t}(s.PureComponent);const di=(0,L.A)(ye({handleSubmit:function(e,t){(0,t.props.onSubmit)(e)},mapPropsToValues:function(e){var t=e.getFields,n=e.shippingAddress;return{billingSameAsShipping:e.isBillingSameAsShipping,orderComment:e.customerMessage,shippingAddress:(0,Sn.A)(t(n&&n.countryCode),n)}},isInitialValid:function(e){var t=e.shippingAddress,n=e.getFields,i=e.language;return!!t&&(0,Ae.A)({language:i,formFields:n(t.countryCode)}).isValidSync(t)},validationSchema:function(e){var t=e.language,n=e.getFields;return e.methodId?(0,x.Ik)({shippingAddress:(0,x.RZ)((function(e){return(0,An.A)({translate:(0,Ae.X)(t),formFields:n(e&&e.countryCode)})}))}):(0,x.Ik)({shippingAddress:(0,x.RZ)((function(e){return(0,Ae.A)({language:t,formFields:n(e&&e.countryCode)})}))})},enableReinitialize:!1})(li));const ci=function(e){function t(t){var n=e.call(this,t)||this;return n.stripeLoadedCallback=function(){n.setState({isStripeLoading:!1})},n.handleIsAutoStep=function(){n.setState({isStripeAutoStep:!0})},n.state={isStripeLoading:!0,isStripeAutoStep:!1},n}return(0,i.__extends)(t,e),t.prototype.render=function(){var e=this.props,t=e.isBillingSameAsShipping,n=e.isGuest,a=e.shouldShowMultiShipping,r=(e.customer,e.updateAddress),o=e.initialize,l=e.deinitialize,c=e.isMultiShippingMode,u=e.isNewMultiShippingUIEnabled,m=e.step,p=e.onSubmit,h=e.onMultiShippingChange,g=e.isLoading,f=e.isShippingMethodLoading,v=(0,i.__rest)(e,["isBillingSameAsShipping","isGuest","shouldShowMultiShipping","customer","updateAddress","initialize","deinitialize","isMultiShippingMode","isNewMultiShippingUIEnabled","step","onSubmit","onMultiShippingChange","isLoading","isShippingMethodLoading"]),S=this.state,A=S.isStripeLoading,E=S.isStripeAutoStep;return s.createElement(s.Fragment,null,s.createElement(d.A,{isLoading:E||A}),s.createElement("div",{className:"checkout-form",style:{display:E||A?"none":void 0}},s.createElement(ii,{isGuest:n,isMultiShippingMode:c,isNewMultiShippingUIEnabled:u,onMultiShippingChange:h,shouldShowMultiShipping:a}),s.createElement(di,(0,i.__assign)({},v,{deinitialize:l,initialize:o,isBillingSameAsShipping:t,isLoading:g,isMultiShippingMode:c,isShippingMethodLoading:f,isStripeAutoStep:this.handleIsAutoStep,isStripeLoading:this.stripeLoadedCallback,onSubmit:p,step:m,updateAddress:r}))))},t}(s.Component);var ui=function(e){function t(t){var n=e.call(this,t)||this;return n.handleMultiShippingModeSwitch=function(){return(0,i.__awaiter)(n,void 0,void 0,(function(){var e,t,n,s,r,o,l,d,c,u,m;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:e=this.props,t=e.consignments,n=e.isMultiShippingMode,s=e.isNewMultiShippingUIEnabled,r=e.onToggleMultiShipping,o=void 0===r?a.noop:r,l=e.onUnhandledError,d=void 0===l?a.noop:l,c=e.updateShippingAddress,u=e.deleteConsignments,i.label=1;case 1:return i.trys.push([1,9,10,11]),this.setState({isInitializing:!0}),s?n&&t.length?[4,c(t[0].shippingAddress)]:[3,3]:[3,6];case 2:return i.sent(),[3,5];case 3:return[4,u()];case 4:i.sent(),i.label=5;case 5:return[3,8];case 6:return n&&t.length>1?[4,c(t[0].shippingAddress)]:[3,8];case 7:i.sent(),i.label=8;case 8:return[3,11];case 9:return m=i.sent(),d(m),[3,11];case 10:return this.setState({isInitializing:!1}),[7];case 11:return o(),[2]}}))}))},n.handleSingleShippingSubmit=function(e){return(0,i.__awaiter)(n,[e],void 0,(function(e){var t,n,a,s,r,o,l,d,c,u,h,g,f,v,S=e.billingSameAsShipping,A=e.shippingAddress,E=e.orderComment;return(0,i.__generator)(this,(function(e){switch(e.label){case 0:t=this.props,n=t.customerMessage,a=t.updateCheckout,s=t.updateShippingAddress,r=t.updateBillingAddress,o=t.navigateNextStep,l=t.onUnhandledError,d=t.shippingAddress,c=t.billingAddress,u=t.methodId,h=A&&m(A),g=[],f=this.hasRemoteBilling(u),p(h,d)&&(null==d?void 0:d.shouldSaveAddress)===(null==h?void 0:h.shouldSaveAddress)||g.push(s(h||{})),S&&h&&!p(h,c)&&!f&&g.push(r(h)),n!==E&&g.push(a({customerMessage:E})),e.label=1;case 1:return e.trys.push([1,3,,4]),[4,Promise.all(g)];case 2:return e.sent(),o(S),[3,4];case 3:return(v=e.sent())instanceof Error&&l(v),[3,4];case 4:return[2]}}))}))},n.hasRemoteBilling=function(e){return["amazonpay"].some((function(t){return t===e}))},n.handleUseNewAddress=function(e,t){return(0,i.__awaiter)(n,void 0,void 0,(function(){var n,a,s,r;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:n=this.props,a=n.unassignItem,s=n.onUnhandledError,i.label=1;case 1:return i.trys.push([1,3,,4]),[4,a({address:e,lineItems:[{quantity:1,itemId:t}]})];case 2:return i.sent(),location.href="/account.php?action=add_shipping_address&from=checkout",[3,4];case 3:return(r=i.sent())instanceof b&&s(new b(r)),[3,4];case 4:return[2]}}))}))},n.handleMultiShippingSubmit=function(e){return(0,i.__awaiter)(n,[e],void 0,(function(e){var t,n,a,s,r,o,l=e.orderComment;return(0,i.__generator)(this,(function(e){switch(e.label){case 0:t=this.props,n=t.customerMessage,a=t.updateCheckout,s=t.navigateNextStep,r=t.onUnhandledError,e.label=1;case 1:return e.trys.push([1,4,,5]),n===l?[3,3]:[4,a({customerMessage:l})];case 2:e.sent(),e.label=3;case 3:return s(!1),[3,5];case 4:return(o=e.sent())instanceof Error&&r(o),[3,5];case 5:return[2]}}))}))},n.state={isInitializing:!0,isMultiShippingUnavailableModalOpen:!1},n}return(0,i.__extends)(t,e),t.prototype.componentDidMount=function(){return(0,i.__awaiter)(this,void 0,void 0,(function(){var e,t,n,s,r,o,l,d,c,u,m,p;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:e=this.props,t=e.loadShippingAddressFields,n=e.loadBillingAddressFields,s=e.loadShippingOptions,r=e.onReady,o=void 0===r?a.noop:r,l=e.onUnhandledError,d=void 0===l?a.noop:l,c=e.cartHasPromotionalItems,u=e.isMultiShippingMode,m=e.isNewMultiShippingUIEnabled,i.label=1;case 1:return i.trys.push([1,3,4,5]),[4,Promise.all([t(),s(),n()])];case 2:return i.sent(),c&&u&&m&&this.setState({isMultiShippingUnavailableModalOpen:!0}),o(),[3,5];case 3:return p=i.sent(),d(p),[3,5];case 4:return this.setState({isInitializing:!1}),[7];case 5:return[2]}}))}))},t.prototype.render=function(){var e=this,t=this.props,n=t.isBillingSameAsShipping,a=t.isGuest,r=t.shouldShowMultiShipping,o=t.isNewMultiShippingUIEnabled,u=t.validateGoogleMapAutoCompleteMaxLength,m=t.validateAddressFields,p=t.customer,h=t.updateShippingAddress,g=t.initializeShippingMethod,f=t.deinitializeShippingMethod,v=t.isMultiShippingMode,S=t.step,A=t.isFloatingLabelEnabled,E=t.shouldRenderStripeForm,_=t.shouldRenderWhileLoading,C=t.cartHasPromotionalItems,y=(0,i.__rest)(t,["isBillingSameAsShipping","isGuest","shouldShowMultiShipping","isNewMultiShippingUIEnabled","validateGoogleMapAutoCompleteMaxLength","validateAddressFields","customer","updateShippingAddress","initializeShippingMethod","deinitializeShippingMethod","isMultiShippingMode","step","isFloatingLabelEnabled","shouldRenderStripeForm","shouldRenderWhileLoading","cartHasPromotionalItems"]),b=this.state,I=b.isInitializing,N=b.isMultiShippingUnavailableModalOpen;return E&&!p.email&&this.props.countries.length>0?s.createElement(ci,(0,i.__assign)({},y,{customer:p,deinitialize:f,initialize:g,isBillingSameAsShipping:n,isGuest:a,isInitialValueLoaded:!_||!I,isLoading:I,isMultiShippingMode:v,isNewMultiShippingUIEnabled:o,isShippingMethodLoading:this.props.isLoading,onMultiShippingChange:this.handleMultiShippingModeSwitch,onSubmit:this.handleSingleShippingSubmit,shouldShowMultiShipping:r,step:S,updateAddress:h})):s.createElement(d.A,{isLoading:I,renderWhileLoading:_},s.createElement("div",{className:"checkout-form"},s.createElement(c.A,{action:function(){return(0,i.__awaiter)(e,void 0,void 0,(function(){return(0,i.__generator)(this,(function(e){switch(e.label){case 0:return this.setState({isMultiShippingUnavailableModalOpen:!1}),[4,this.handleMultiShippingModeSwitch()];case 1:return e.sent(),[2]}}))}))},actionButtonLabel:s.createElement(l.A,{id:"common.ok_action"}),headerId:"shipping.multishipping_unavailable_action",isModalOpen:N,messageId:"shipping.checkout_switched_to_single_shipping",shouldShowCloseButton:!1}),s.createElement(ii,{cartHasPromotionalItems:C,isGuest:a,isMultiShippingMode:v,isNewMultiShippingUIEnabled:o,onMultiShippingChange:this.handleMultiShippingModeSwitch,shouldShowMultiShipping:r}),s.createElement(ni,(0,i.__assign)({},y,{addresses:p.addresses,deinitialize:f,initialize:g,isBillingSameAsShipping:n,isFloatingLabelEnabled:A,isGuest:a,isInitialValueLoaded:!_||!I,isMultiShippingMode:v,isNewMultiShippingUIEnabled:o,onMultiShippingSubmit:this.handleMultiShippingSubmit,onSingleShippingSubmit:this.handleSingleShippingSubmit,onUseNewAddress:this.handleUseNewAddress,shouldShowSaveAddress:!a,updateAddress:h,validateAddressFields:m,validateGoogleMapAutoCompleteMaxLength:u}))))},t}(s.Component),mi=(0,r.createSelector)((function(e){return e.checkoutService.deleteConsignment}),(function(e){return e.checkoutState.data.getConsignments()}),(function(e,t){return function(){return(0,i.__awaiter)(void 0,void 0,void 0,(function(){return(0,i.__generator)(this,(function(n){switch(n.label){case 0:return t&&t.length?[4,Promise.all(t.map((function(t){var n=t.id;return e(n)})))]:[2];case 1:return[2,n.sent()[0].data.getShippingAddress()]}}))}))}}));function pi(e){var t,n=e.checkoutService,i=e.checkoutState,a=i.data,s=a.getCart,r=a.getCheckout,l=a.getConfig,d=a.getCustomer,c=a.getConsignments,u=a.getShippingAddress,m=a.getBillingAddress,p=a.getShippingAddressFields,h=a.getShippingCountries,g=i.statuses,_=g.isShippingStepPending,C=g.isSelectingShippingOption,y=g.isLoadingShippingOptions,b=g.isUpdatingConsignment,I=g.isCreatingConsignments,w=g.isCreatingCustomerAddress,k=g.isLoadingShippingCountries,L=g.isUpdatingBillingAddress,F=g.isUpdatingCheckout,P=g.isDeletingConsignment,x=r(),U=l(),T=c()||[],R=d(),z=s();if(!(x&&U&&R&&z))return null;var B=U.checkoutSettings,D=B.enableOrderComments,V=B.features,H=B.hasMultiShippingEnabled,W=B.googleMapsApiKey,K=M(x,U),G=y()||C()||b()||I()||L()||F()||w()||P(),q=(0,f.A)(U.checkoutSettings,"PROJECT-4159.improve_multi_address_shipping_ui"),J=N(z,q),Q=H&&!K&&J>1,j=(0,f.A)(U.checkoutSettings,"CHECKOUT-8776.google_autocomplete_max_length_validation")&&Boolean(W),Z=(0,f.A)(U.checkoutSettings,"CHECKOUT-7560.address_fields_max_length_validation"),Y=!Q&&T.length>1?void 0:u(),X=(0,A.A)(U.checkoutSettings.providerWithCustomCheckout);return{assignItem:n.assignItemsToAddress,billingAddress:m(),cart:z,cartHasPromotionalItems:O(z),consignments:T,countries:h()||v.M,countriesWithAutocomplete:["US","CA","AU","NZ","GB"],customer:R,customerMessage:x.customerMessage,createCustomerAddress:n.createCustomerAddress,deinitializeShippingMethod:n.deinitializeShipping,deleteConsignments:mi({checkoutService:n,checkoutState:i}),getFields:p,googleMapsApiKey:W,initializeShippingMethod:n.initializeShipping,isGuest:R.isGuest,isInitializing:k()||y(),isLoading:G,isShippingStepPending:_(),loadShippingAddressFields:n.loadShippingAddressFields,loadBillingAddressFields:n.loadBillingAddressFields,loadShippingOptions:n.loadShippingOptions,methodId:K,providerWithCustomCheckout:X,shippingAddress:Y,shouldRenderWhileLoading:null===(t=V["CHECKOUT-8300.improve_extension_performance"])||void 0===t||t,shouldShowMultiShipping:Q,isNewMultiShippingUIEnabled:q,validateGoogleMapAutoCompleteMaxLength:j,validateAddressFields:Z,shouldShowOrderComments:D,signOut:n.signOutCustomer,unassignItem:n.unassignItemsToAddress,updateBillingAddress:n.updateBillingAddress,updateCheckout:n.updateCheckout,updateShippingAddress:n.updateShippingAddress,isFloatingLabelEnabled:(0,S.A)(U.checkoutSettings),shouldRenderStripeForm:X===E.A.StripeUPE&&(0,o.A)(z)}}const hi=(0,g.A)(pi)(ui)},83651:(e,t,n)=>{n.d(t,{A:()=>a});var i=n(30455);const a=(0,n(45080).A)((function(){return i.createElement("svg",{height:"24",viewBox:"0 0 24 24",width:"24",xmlns:"http://www.w3.org/2000/svg"},i.createElement("path",{d:"M12 8l-6 6 1.41 1.41L12 10.83l4.59 4.58L18 14z"}))}))},63163:(e,t,n)=>{n.d(t,{Ak:()=>i,Ay:()=>c,Mp:()=>a});var i,a,s=n(31635),r=n(9188),o=n.n(r),l=n(30455);function d(e){var t=e.className,n=e.isFullWidth,s=e.isLoading,r=e.size,l=e.variant;return o()("button",t,{"button--primary":l===i.Primary},{"button--tertiary":l===i.Secondary},{"button--action":l===i.Action},{"button--small":r===a.Small},{"button--tiny":r===a.Tiny},{"button--large":r===a.Large},{"button--slab":n},{"optimizedCheckout-buttonPrimary":l===i.Primary||l===i.Action},{"optimizedCheckout-buttonSecondary":l===i.Secondary},{"is-loading":s})}!function(e){e.Primary="primary",e.Secondary="secondary",e.Action="action"}(i||(i={})),function(e){e.Small="small",e.Tiny="tiny",e.Large="large"}(a||(a={}));const c=function(e){var t=e.children,n=e.className,i=e.disabled,a=e.isFullWidth,r=e.isLoading,o=e.size,c=e.testId,u=e.type,m=e.variant,p=(0,s.__rest)(e,["children","className","disabled","isFullWidth","isLoading","size","testId","type","variant"]);return l.createElement("button",(0,s.__assign)({},p,{className:d({className:n,isFullWidth:a,isLoading:r,size:o,variant:m}),"data-test":c,disabled:i||r,type:u||"button"}),t)}},40891:(e,t,n)=>{n.d(t,{A:()=>f});var i=n(93564),a=n(30455),s=n(49655),r=n(63163),o=n(31635),l=n(9188),d=n.n(l),c=n(38495),u=n.n(c),m=n(72769);const p=(0,n(2156).A)((function(){return a.createElement("svg",{height:"24",viewBox:"0 0 24 24",width:"24",xmlns:"http://www.w3.org/2000/svg"},a.createElement("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}))}));const h=function(e){var t=e.children,n=e.closeButtonLabel,s=void 0===n?"Close":n,r=e.footer,l=e.header,c=e.additionalHeaderClassName,h=e.additionalBodyClassName,g=e.additionalModalClassName,f=e.onRequestClose,v=void 0===f?i.noop:f,S=e.shouldShowCloseButton,A=void 0!==S&&S,E=(0,o.__rest)(e,["children","closeButtonLabel","footer","header","additionalHeaderClassName","additionalBodyClassName","additionalModalClassName","onRequestClose","shouldShowCloseButton"]),_=(0,a.useCallback)((function(e){v(e)}),[v]);return a.createElement(u(),(0,o.__assign)({},E,{ariaHideApp:!0,bodyOpenClassName:"has-activeModal",className:{base:d()("modal optimizedCheckout-contentPrimary",g),afterOpen:"modal--afterOpen",beforeClose:"modal--beforeClose"},closeTimeoutMS:200,onRequestClose:v,overlayClassName:{base:"modalOverlay",afterOpen:"modalOverlay--afterOpen",beforeClose:"modalOverlay--beforeClose"},shouldCloseOnEsc:!0,shouldCloseOnOverlayClick:!1}),a.createElement("div",{className:d()("modal-header",c)},l,A&&a.createElement("a",{className:"modal-close","data-test":"modal-close-button",href:"#",onClick:(0,m.A)(_)},s&&a.createElement("span",{className:"is-srOnly"},s),a.createElement(p,null))),a.createElement("div",{className:d()("modal-body",h),"data-test":"modal-body"},t),Boolean(r)&&a.createElement("div",{className:"modal-footer","data-test":"modal-footer"},r))};const g=function(e){var t=e.children,n=e.additionalClassName;return a.createElement("h2",{className:d()("modal-header-title optimizedCheckout-headingSecondary",n),"data-test":"modal-heading"},t)};const f=function(e){var t=e.headerId,n=e.messageId,o=e.isModalOpen,l=e.action,d=e.actionButtonLabel,c=e.onRequestClose,u=void 0===c?i.noop:c,m=e.shouldShowCloseButton,p=void 0===m||m;return a.createElement(h,{additionalModalClassName:"modal--confirm",footer:a.createElement(r.Ay,{onClick:l,size:r.Mp.Small,variant:r.Ak.Primary},null!=d?d:a.createElement(s.A,{id:"common.confirm_action"})),header:a.createElement(g,null,a.createElement("span",{"aria-live":"assertive",role:"alert"},a.createElement(s.A,{id:t}))),isOpen:o,onRequestClose:u,shouldShowCloseButton:p},a.createElement("p",{"aria-live":"assertive",role:"alert"},a.createElement(s.A,{id:n})))}}}]);
//# sourceMappingURL=shipping-b20c335e.js.map